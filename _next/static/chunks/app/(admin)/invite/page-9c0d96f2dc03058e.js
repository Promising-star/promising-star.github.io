(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5381],{2995:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(12115);let a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"};var i=n(26240);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let c=r.forwardRef((e,t)=>r.createElement(i.A,s({},e,{ref:t,icon:a})))},12874:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>b});var r=n(95155);n(92932);var a=n(12115),i=n(20063),s=n(19279),c=n(89543),l=n(92362),o=n(63646),d=n(785),u=n(36060),p=n(39578),h=n(69522),y=n(50329),g=n(2995),f=n(37783),m=n(83487);let{Text:v}=s.A;function x(){let{message:e}=c.A.useApp(),t=(0,i.useSearchParams)(),n=(0,i.useRouter)(),s=t.get("code")||"",[x,b]=(0,a.useState)("loading"),[j,w]=(0,a.useState)(null),[A,O]=(0,a.useState)(""),k=(0,a.useCallback)(async()=>{if(!s){b("invalid-code"),O("邀请码不能为空");return}try{var e;let t=await fetch(f.Aq.getGatewayUrl("/api/f/getinvitestatus"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({}),credentials:"include"});if(403===t.status||401===t.status)return void b("not-logged-in");let n=await t.json();if(200!==n.status)return void b("not-logged-in");if(n.data.hasInviter){w({valid:!1,alreadyBound:!0,boundInviterNickname:n.data.inviterNickname}),b("already-bound");return}let r=await fetch(f.Aq.getGatewayUrl("/api/v/verifyinvitecode"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:s}),credentials:"include"}),a=await r.json();200===a.status&&(null==(e=a.data)?void 0:e.valid)?(w({valid:!0,inviterNickname:a.data.inviterNickname}),b("can-bind")):(b("invalid-code"),O("邀请码无效或已失效"))}catch(e){console.error("检查邀请状态失败:",e),b("not-logged-in")}},[s]);(0,a.useEffect)(()=>{k()},[k]);let C=async()=>{b("binding");try{let t=await fetch(f.Aq.getGatewayUrl("/api/f/bindinvitecode"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:s}),credentials:"include"}),n=await t.json();200===n.status?(b("success"),e.success("邀请码绑定成功！")):(b("error"),O(n.errmessage||"绑定失败"))}catch(e){b("error"),O("网络错误，请重试")}},N=()=>{n.push("/login?code=".concat(s,"&action=register"))},S=()=>{n.push("/login?code=".concat(s,"&action=login"))},z=()=>{n.push("/admin")},E=()=>{switch(x){case"loading":return(0,r.jsx)(m.Ay,{text:"正在检查邀请码..."});case"not-logged-in":return(0,r.jsx)(l.Ay,{icon:(0,r.jsx)(h.A,{style:{color:"#818cf8"}}),title:"您收到了一个邀请",subTitle:"邀请码: ".concat(s),extra:(0,r.jsxs)(o.A,{direction:"vertical",size:"middle",style:{width:"100%"},children:[(0,r.jsx)(v,{type:"secondary",children:"请先登录或注册账号，然后绑定邀请码享受新用户优惠"}),(0,r.jsxs)(o.A,{children:[(0,r.jsx)(d.Ay,{type:"primary",size:"large",onClick:N,children:"注册新账号"}),(0,r.jsx)(d.Ay,{size:"large",onClick:S,children:"已有账号，去登录"})]})]})});case"can-bind":return(0,r.jsx)(l.Ay,{icon:(0,r.jsx)(h.A,{style:{color:"#10b981"}}),title:"确认绑定邀请码",subTitle:(0,r.jsxs)(o.A,{direction:"vertical",children:[(0,r.jsxs)(v,{children:["邀请人: ",(0,r.jsx)(v,{strong:!0,children:null==j?void 0:j.inviterNickname})]}),(0,r.jsx)(v,{type:"secondary",children:"绑定后可享受新用户专属优惠"})]}),extra:(0,r.jsxs)(o.A,{children:[(0,r.jsx)(d.Ay,{type:"primary",size:"large",onClick:C,children:"确认绑定"}),(0,r.jsx)(d.Ay,{size:"large",onClick:z,children:"暂不绑定"})]})});case"already-bound":return(0,r.jsx)(l.Ay,{status:"info",icon:(0,r.jsx)(y.A,{style:{color:"#818cf8"}}),title:"您已绑定过邀请码",subTitle:(0,r.jsxs)(v,{children:["您的邀请人是: ",(0,r.jsx)(v,{strong:!0,children:null==j?void 0:j.boundInviterNickname})]}),extra:(0,r.jsx)(d.Ay,{type:"primary",onClick:z,children:"返回控制台"})});case"invalid-code":return(0,r.jsx)(l.Ay,{status:"warning",title:"邀请码无效",subTitle:A||"该邀请码不存在或已失效",extra:(0,r.jsxs)(o.A,{children:[(0,r.jsx)(d.Ay,{type:"primary",onClick:z,children:"返回控制台"}),(0,r.jsx)(d.Ay,{onClick:N,children:"注册新账号"})]})});case"binding":return(0,r.jsxs)("div",{style:{textAlign:"center",padding:60},children:[(0,r.jsx)(u.A,{size:"large"}),(0,r.jsx)("div",{style:{marginTop:16},children:(0,r.jsx)(v,{children:"正在绑定邀请码..."})})]});case"success":return(0,r.jsx)(l.Ay,{status:"success",icon:(0,r.jsx)(g.A,{style:{color:"#10b981"}}),title:"绑定成功！",subTitle:(0,r.jsxs)(v,{children:["您已成功绑定邀请人 ",(0,r.jsx)(v,{strong:!0,children:null==j?void 0:j.inviterNickname})," 的邀请码"]}),extra:(0,r.jsx)(d.Ay,{type:"primary",size:"large",onClick:z,children:"进入控制台"})});case"error":return(0,r.jsx)(l.Ay,{status:"error",title:"绑定失败",subTitle:A,extra:(0,r.jsxs)(o.A,{children:[(0,r.jsx)(d.Ay,{type:"primary",onClick:()=>k(),children:"重试"}),(0,r.jsx)(d.Ay,{onClick:z,children:"返回控制台"})]})})}};return"loading"===x?E():(0,r.jsxs)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#1b1b1f",padding:20},children:[(0,r.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"radial-gradient(ellipse at top left, rgba(99, 102, 241, 0.15) 0%, transparent 50%), radial-gradient(ellipse at bottom right, rgba(139, 92, 246, 0.1) 0%, transparent 50%)",pointerEvents:"none"}}),(0,r.jsxs)(p.A,{style:{width:"100%",maxWidth:500,background:"#27272c",borderRadius:24,border:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)"},styles:{body:{padding:"40px 24px"}},children:[(0,r.jsxs)("div",{style:{textAlign:"center",marginBottom:24,display:"flex",alignItems:"center",justifyContent:"center",gap:12},children:[(0,r.jsx)("img",{src:"https://www.rustplus.cn/logo.png",alt:"Logo",style:{width:56,height:56,borderRadius:16,objectFit:"contain"}}),(0,r.jsx)(v,{style:{fontSize:20,fontWeight:600,color:"#fff"},children:"Rust工具箱"})]}),E()]})]})}function b(){return(0,r.jsx)(a.Suspense,{fallback:(0,r.jsx)(m.Ay,{text:"加载中..."}),children:(0,r.jsx)(x,{})})}},37783:(e,t,n)=>{"use strict";n.d(t,{Aq:()=>a,Ay:()=>i});let r="https://gateway.rustplus.cn";class a{static formatDateTime(e){let t=new Date(e),n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0");return"".concat(n,"-").concat(r,"-").concat(a," ").concat(i,":").concat(s)}static async copyToClipboard(e,t){let{onSuccess:n,onError:r}=t||{};try{if(navigator.clipboard&&window.isSecureContext)return await navigator.clipboard.writeText(e),null==n||n(),!0;let t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select();try{let e=document.execCommand("copy");if(document.body.removeChild(t),e)return null==n||n(),!0}catch(e){throw document.body.removeChild(t),e}return window.prompt("复制失败，请手动复制以下文本:",e),null==n||n(),!0}catch(e){return null==r||r(e instanceof Error?e:Error(String(e))),!1}}static toBoolean(e){return"string"==typeof e?"true"===(e=e.toLowerCase().trim())||"1"===e:!!e}static getGatewayUrl(e){return e.startsWith("/api/pay/")||e.startsWith("/api/notice/")?"".concat(r).concat(e):e.startsWith("/api/")?"".concat(r,"/api/backend").concat(e.slice(4)):"".concat(r).concat(e)}static async backendFetch(e,t){return fetch(a.getGatewayUrl(e),{credentials:"include",...t}).then(e=>403===e.status?(window.location.pathname.startsWith("/login")||(window.location.href="/login"),Promise.reject(Error("Unauthorized"))):e).catch(e=>{throw e})}static getCookie(e){var t,n;let r="; ".concat(document.cookie).split("; ".concat(e,"="));if(2===r.length)return null!=(n=null==(t=r.pop())?void 0:t.split(";").shift())?n:""}static detectDevice(){if("undefined"==typeof navigator)return{isMobile:!1,isWechat:!1,isIOS:!1,isAndroid:!1};let e=navigator.userAgent;return{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e),isWechat:/MicroMessenger/i.test(e),isIOS:/iPhone|iPad|iPod/i.test(e),isAndroid:/Android/i.test(e)}}}let i={domain:"rustplus.cn",payWebUrl:"https://pay.rustplus.cn"}},50329:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(12115);let a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"};var i=n(26240);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let c=r.forwardRef((e,t)=>r.createElement(i.A,s({},e,{ref:t,icon:a})))},63646:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var r=n(12115),a=n(85203),i=n.n(a),s=n(46734);function c(e){return["small","middle","large"].includes(e)}function l(e){return!!e&&"number"==typeof e&&!Number.isNaN(e)}var o=n(1943),d=n(51511);let u=r.createContext({latestIndex:0}),p=u.Provider,h=e=>{let{className:t,index:n,children:a,split:i,style:s}=e,{latestIndex:c}=r.useContext(u);return null==a?null:r.createElement(r.Fragment,null,r.createElement("div",{className:t,style:s},a),n<c&&i&&r.createElement("span",{className:"".concat(t,"-split")},i))};var y=n(73513),g=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)0>t.indexOf(r[a])&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};let f=r.forwardRef((e,t)=>{var n;let{getPrefixCls:a,direction:d,size:u,className:f,style:m,classNames:v,styles:x}=(0,o.TP)("space"),{size:b=null!=u?u:"small",align:j,className:w,rootClassName:A,children:O,direction:k="horizontal",prefixCls:C,split:N,style:S,wrap:z=!1,classNames:E,styles:P}=e,T=g(e,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap","classNames","styles"]),[M,I]=Array.isArray(b)?b:[b,b],R=c(I),B=c(M),W=l(I),H=l(M),_=(0,s.A)(O,{keepEmpty:!0}),L=void 0===j&&"horizontal"===k?"center":j,G=a("space",C),[U,V,q]=(0,y.A)(G),D=i()(G,f,V,"".concat(G,"-").concat(k),{["".concat(G,"-rtl")]:"rtl"===d,["".concat(G,"-align-").concat(L)]:L,["".concat(G,"-gap-row-").concat(I)]:R,["".concat(G,"-gap-col-").concat(M)]:B},w,A,q),F=i()("".concat(G,"-item"),null!=(n=null==E?void 0:E.item)?n:v.item),J=0,Y=_.map((e,t)=>{var n;null!=e&&(J=t);let a=(null==e?void 0:e.key)||"".concat(F,"-").concat(t);return r.createElement(h,{className:F,key:a,index:t,split:N,style:null!=(n=null==P?void 0:P.item)?n:x.item},e)}),K=r.useMemo(()=>({latestIndex:J}),[J]);if(0===_.length)return null;let Q={};return z&&(Q.flexWrap="wrap"),!B&&H&&(Q.columnGap=M),!R&&W&&(Q.rowGap=I),U(r.createElement("div",Object.assign({ref:t,className:D,style:Object.assign(Object.assign(Object.assign({},Q),m),S)},T),r.createElement(p,{value:K},Y)))});f.Compact=d.Ay;let m=f},69522:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(12115);let a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 310H732.4c13.6-21.4 21.6-46.8 21.6-74 0-76.1-61.9-138-138-138-41.4 0-78.7 18.4-104 47.4-25.3-29-62.6-47.4-104-47.4-76.1 0-138 61.9-138 138 0 27.2 7.9 52.6 21.6 74H144c-17.7 0-32 14.3-32 32v200c0 4.4 3.6 8 8 8h40v344c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V550h40c4.4 0 8-3.6 8-8V342c0-17.7-14.3-32-32-32zm-334-74c0-38.6 31.4-70 70-70s70 31.4 70 70-31.4 70-70 70h-70v-70zm-138-70c38.6 0 70 31.4 70 70v70h-70c-38.6 0-70-31.4-70-70s31.4-70 70-70zM180 482V378h298v104H180zm48 68h250v308H228V550zm568 308H546V550h250v308zm48-376H546V378h298v104z"}}]},name:"gift",theme:"outlined"};var i=n(26240);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let c=r.forwardRef((e,t)=>r.createElement(i.A,s({},e,{ref:t,icon:a})))},80292:(e,t,n)=>{Promise.resolve().then(n.bind(n,12874))},83487:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>l,Jy:()=>s,bT:()=>c,ek:()=>i});var r=n(95155),a=n(12115);function i(){if("undefined"!=typeof document){let e=document.getElementById("app-loader");e&&e.classList.remove("hidden")}}function s(){if("undefined"!=typeof document){let e=document.getElementById("app-loader");e&&e.classList.add("hidden")}}function c(){if("undefined"!=typeof document){let e=document.getElementById("app-loader");return null!==e&&!e.classList.contains("hidden")}return!1}function l(e){let{text:t="加载中...",subText:n}=e;return a.useEffect(()=>{s()},[]),(0,r.jsxs)("div",{className:"fullscreen-loader",children:[(0,r.jsx)("div",{className:"fullscreen-loader-bg"}),(0,r.jsxs)("div",{className:"fullscreen-loader-content",children:[(0,r.jsxs)("div",{className:"fullscreen-loader-logo-container",children:[(0,r.jsx)("img",{className:"fullscreen-loader-logo",src:"https://www.rustplus.cn/logo.png",alt:"Logo"}),(0,r.jsx)("div",{className:"fullscreen-loader-spinner"})]}),(0,r.jsx)("div",{className:"fullscreen-loader-text",children:t}),n&&(0,r.jsx)("div",{className:"fullscreen-loader-subtext",children:n})]})]})}},92932:(e,t,n)=>{"use strict";var r=n(79484),a=n(12669);(0,r.L)(function(e,t){t._reactRoot||(t._reactRoot=(0,a.createRoot)(t));var n=t._reactRoot;return n.render(e),function(){return new Promise(function(e){setTimeout(function(){n.unmount(),e()},0)})}})}},e=>{e.O(0,[4041,6083,785,6240,9279,2245,9543,6060,3621,3919,4540,9578,371,8441,1255,7358],()=>e(e.s=80292)),_N_E=e.O()}]);