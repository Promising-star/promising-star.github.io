(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1114],{20026:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>B});var i=r(95155);r(92932);var n=r(12115),s=r(19279),a=r(39578),o=r(63646),l=r(36060),c=r(785),d=r(92199),h=r(14274),g=r(65614),u=r(2995),p=r(47975);let f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-in",theme:"outlined"};var b=r(26240);function y(){return(y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}let x=n.forwardRef((e,t)=>n.createElement(b.A,y({},e,{ref:t,icon:f})));var m=r(52492);let j={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"};function v(){return(v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}let w=n.forwardRef((e,t)=>n.createElement(b.A,v({},e,{ref:t,icon:j})));var A=r(56418),S=r(67641),k=r(20063),z=r(37783),R=r(49621);let{Title:E,Text:C}=s.A,O=e=>{let{currentStep:t}=e,r=[{icon:(0,i.jsx)(d.A,{}),title:"绑定 Steam"},{icon:(0,i.jsx)(h.A,{}),title:"配对服务器"},{icon:(0,i.jsx)(g.A,{}),title:"设置用户页"}];return(0,i.jsx)("div",{className:"help-progress-indicator",style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:32,padding:"20px 0"},children:r.map((e,s)=>(0,i.jsxs)(n.Fragment,{children:[(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:8},children:[(0,i.jsx)("div",{className:"help-step-icon",style:{width:44,height:44,borderRadius:12,background:s<t?"linear-gradient(135deg, #10b981 0%, #059669 100%)":s===t?"linear-gradient(135deg, #6366f1 0%, #4f46e5 100%)":"rgba(255, 255, 255, 0.05)",border:s<=t?"none":"1px solid rgba(255, 255, 255, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:18,color:s<=t?"#fff":"rgba(255, 255, 255, 0.3)",boxShadow:s===t?"0 4px 14px rgba(99, 102, 241, 0.4)":"none",transition:"all 0.3s ease"},children:s<t?(0,i.jsx)(u.A,{}):e.icon}),(0,i.jsx)(C,{style:{fontSize:12,color:s===t?"#fff":s<t?"#10b981":"rgba(255, 255, 255, 0.4)",fontWeight:s===t?600:400},children:e.title})]}),s<r.length-1&&(0,i.jsx)("div",{className:"help-step-line",style:{width:60,height:2,background:s<t?"linear-gradient(90deg, #10b981 0%, #10b981 100%)":"rgba(255, 255, 255, 0.1)",margin:"0 12px",marginBottom:28,borderRadius:1}})]},s))})};function B(){let e=(0,k.useRouter)(),[t,r]=(0,n.useState)(!1),[s,d]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let t=async()=>{try{let t=await z.Aq.backendFetch("/api/f/gethomepageinfo",{method:"POST"}),r=await t.json();if(200===r.status){if(r.data.appid&&d(!0),r.data.rustToken){let t=(e=>{try{let t=e.split(".")[0],r=atob(t);return JSON.parse(r).exp||null}catch(e){return null}})(r.data.rustToken);if(t&&Math.floor(Date.now()/1e3)>=t)return void e.push("/admin/help/rusttoken")}r.data.server&&Object.keys(r.data.server).length>0&&e.push("/admin/help/userpage")}}catch(e){console.error("检查状态失败:",e)}};t();let r=()=>t();return R.B.on("ADMIN_DATA_SERVER_UPDATE",r),()=>{R.B.off("ADMIN_DATA_SERVER_UPDATE",r)}},[e]),(0,i.jsxs)("div",{className:"help-page-container",style:{maxWidth:900,margin:"0 auto"},children:[!s&&(0,i.jsx)(O,{currentStep:1}),(0,i.jsx)(a.A,{style:{background:"linear-gradient(135deg, #10b981 0%, #059669 50%, #047857 100%)",borderRadius:16,border:"none",marginBottom:24},children:(0,i.jsxs)(o.A,{direction:"vertical",size:8,children:[(0,i.jsxs)(o.A,{children:[(0,i.jsx)(h.A,{style:{fontSize:24,color:"#fff"}}),(0,i.jsx)(E,{level:4,style:{margin:0,color:"#fff"},children:s?"配对服务器":"第二步：配对服务器"})]}),(0,i.jsx)(C,{style:{color:"rgba(255,255,255,0.85)",fontSize:15},children:"进入游戏完成服务器配对，完成后将自动进入下一步"})]})}),(0,i.jsxs)("div",{className:"help-main-content",style:{display:"flex",gap:24,marginBottom:24},children:[(0,i.jsxs)(a.A,{style:{flex:1,background:"#27272c",borderRadius:16,border:"1px solid rgba(255,255,255,0.08)"},children:[(0,i.jsxs)(C,{strong:!0,style:{display:"block",marginBottom:20,color:"#fff",fontSize:15},children:[(0,i.jsx)(p.A,{style:{marginRight:8}}),"配对步骤"]}),(0,i.jsx)(o.A,{direction:"vertical",size:20,style:{width:"100%"},children:[{title:"按 ESC 打开游戏设置",desc:"在游戏中按 ESC 键打开设置菜单"},{title:"点击左上角「当前游戏」",desc:"在设置菜单左上角找到并点击"},{title:"点击「配对」按钮",desc:"点击窗口中 配对 按钮"},{title:"返回浏览器确认配对",desc:"在弹出的配对窗口中确认"}].map((e,t)=>(0,i.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:14},children:[(0,i.jsx)("div",{style:{width:32,height:32,borderRadius:10,background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:15,fontWeight:600,color:"#fff",flexShrink:0},children:t+1}),(0,i.jsxs)("div",{style:{flex:1},children:[(0,i.jsx)(C,{strong:!0,style:{display:"block",marginBottom:2,fontSize:14},children:e.title}),(0,i.jsx)(C,{type:"secondary",style:{fontSize:13},children:e.desc})]})]},t))}),(0,i.jsxs)("div",{style:{marginTop:20,background:"rgba(0,0,0,0.2)",borderRadius:12,padding:8,cursor:"pointer",position:"relative"},onClick:()=>r(!0),children:[(0,i.jsx)("img",{src:"https://www.rustplus.cn/pdgame/1.png",alt:"配对服务器流程",style:{borderRadius:8,width:"100%",height:"auto"}}),(0,i.jsxs)("div",{style:{position:"absolute",bottom:16,right:16,background:"rgba(0,0,0,0.6)",borderRadius:8,padding:"4px 8px",display:"flex",alignItems:"center",gap:4},children:[(0,i.jsx)(x,{style:{color:"#fff",fontSize:12}}),(0,i.jsx)(C,{style:{color:"#fff",fontSize:12},children:"点击放大"})]})]})]}),(0,i.jsxs)("div",{className:"help-sidebar",style:{width:320,display:"flex",flexDirection:"column",gap:16},children:[(0,i.jsxs)(a.A,{style:{background:"rgba(16, 185, 129, 0.1)",borderRadius:12,border:"1px solid rgba(16, 185, 129, 0.2)"},children:[(0,i.jsxs)(o.A,{align:"center",style:{marginBottom:8},children:[(0,i.jsx)(l.A,{indicator:(0,i.jsx)(m.A,{spin:!0,style:{color:"#10b981",fontSize:18}})}),(0,i.jsx)(C,{strong:!0,style:{color:"#6ee7b7"},children:"等待配对中..."})]}),(0,i.jsx)(C,{type:"secondary",style:{fontSize:13},children:"中转服务器已连接，配对成功后页面会自动跳转"})]}),(0,i.jsxs)(a.A,{style:{background:"rgba(99, 102, 241, 0.1)",borderRadius:12,border:"1px solid rgba(99, 102, 241, 0.2)"},children:[(0,i.jsxs)(o.A,{align:"start",style:{marginBottom:8},children:[(0,i.jsx)(w,{style:{color:"#818cf8",fontSize:18}}),(0,i.jsx)(C,{strong:!0,style:{color:"#a5b4fc"},children:"温馨提示"})]}),(0,i.jsx)(C,{type:"secondary",style:{fontSize:13},children:"配对过程中请保持此页面打开。如果没有自动跳转，请手动刷新页面。"})]}),(0,i.jsxs)(a.A,{style:{background:"rgba(245, 158, 11, 0.1)",borderRadius:12,border:"1px solid rgba(245, 158, 11, 0.2)"},children:[(0,i.jsxs)(o.A,{align:"start",style:{marginBottom:8},children:[(0,i.jsx)(A.A,{style:{color:"#f59e0b",fontSize:18}}),(0,i.jsx)(C,{strong:!0,style:{color:"#fcd34d"},children:"配对没有反应？"})]}),(0,i.jsx)(C,{type:"secondary",style:{fontSize:13,display:"block",marginBottom:12},children:"可能是配对服务连接断开，请尝试重新连接"}),(0,i.jsx)(c.Ay,{icon:(0,i.jsx)(S.A,{}),onClick:()=>{R.B.emit("TRIGGER_RECONNECT",{type:"frm"})},style:{height:36,borderRadius:8,background:"rgba(245, 158, 11, 0.2)",border:"1px solid rgba(245, 158, 11, 0.3)",color:"#fcd34d",boxShadow:"none"},children:"重新连接配对服务器"})]})]})]}),t&&(0,i.jsxs)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.85)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>r(!1),children:[(0,i.jsx)("img",{src:"https://www.rustplus.cn/pdgame/1.png",alt:"配对服务器流程",style:{maxWidth:"90%",maxHeight:"90%",borderRadius:12,boxShadow:"0 20px 60px rgba(0,0,0,0.5)"}}),(0,i.jsx)("div",{style:{position:"absolute",top:20,right:20,color:"#fff",fontSize:14,background:"rgba(255,255,255,0.1)",padding:"8px 16px",borderRadius:8},children:"点击任意位置关闭"})]})]})}},37783:(e,t,r)=>{"use strict";r.d(t,{Aq:()=>n,Ay:()=>s});let i="http://localhost:44667";class n{static formatDateTime(e){let t=new Date(e),r=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0"),s=String(t.getHours()).padStart(2,"0"),a=String(t.getMinutes()).padStart(2,"0");return"".concat(r,"-").concat(i,"-").concat(n," ").concat(s,":").concat(a)}static async copyToClipboard(e,t){let{onSuccess:r,onError:i}=t||{};try{if(navigator.clipboard&&window.isSecureContext)return await navigator.clipboard.writeText(e),null==r||r(),!0;let t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select();try{let e=document.execCommand("copy");if(document.body.removeChild(t),e)return null==r||r(),!0}catch(e){throw document.body.removeChild(t),e}return window.prompt("复制失败，请手动复制以下文本:",e),null==r||r(),!0}catch(e){return null==i||i(e instanceof Error?e:Error(String(e))),!1}}static toBoolean(e){return"string"==typeof e?"true"===(e=e.toLowerCase().trim())||"1"===e:!!e}static getGatewayUrl(e){return e.startsWith("/api/pay/")||e.startsWith("/api/notice/")?"".concat(i).concat(e):e.startsWith("/api/")?"".concat(i,"/api/backend").concat(e.slice(4)):"".concat(i).concat(e)}static async backendFetch(e,t){return fetch(n.getGatewayUrl(e),{credentials:"include",...t}).then(e=>403===e.status?(window.location.pathname.startsWith("/login")||(window.location.href="/login"),Promise.reject(Error("Unauthorized"))):e).catch(e=>{throw e})}static getCookie(e){var t,r;let i="; ".concat(document.cookie).split("; ".concat(e,"="));if(2===i.length)return null!=(r=null==(t=i.pop())?void 0:t.split(";").shift())?r:""}static detectDevice(){if("undefined"==typeof navigator)return{isMobile:!1,isWechat:!1,isIOS:!1,isAndroid:!1};let e=navigator.userAgent;return{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e),isWechat:/MicroMessenger/i.test(e),isIOS:/iPhone|iPad|iPod/i.test(e),isAndroid:/Android/i.test(e)}}}let s={domain:"rustplus.cn",payWebUrl:"https://pay.rustplus.cn"}},41826:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});let i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"}},49621:(e,t,r)=>{"use strict";r.d(t,{B:()=>n});class i{emit(e,t){var r;null==(r=this.listeners[e])||r.forEach(e=>e(t))}on(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}off(e,t){var r;this.listeners[e]=null==(r=this.listeners[e])?void 0:r.filter(e=>e!==t)}constructor(){this.listeners={}}}let n=new i},67641:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var i=r(12115),n=r(41826),s=r(26240);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}let o=i.forwardRef((e,t)=>i.createElement(s.A,a({},e,{ref:t,icon:n.A})))},89132:(e,t,r)=>{Promise.resolve().then(r.bind(r,20026))},92932:(e,t,r)=>{"use strict";var i=r(79484),n=r(12669);(0,i.L)(function(e,t){t._reactRoot||(t._reactRoot=(0,n.createRoot)(t));var r=t._reactRoot;return r.render(e),function(){return new Promise(function(e){setTimeout(function(){r.unmount(),e()},0)})}})}},e=>{e.O(0,[4041,6083,785,6240,9279,2245,6060,3621,3919,4540,9578,6811,8441,1255,7358],()=>e(e.s=89132)),_N_E=e.O()}]);