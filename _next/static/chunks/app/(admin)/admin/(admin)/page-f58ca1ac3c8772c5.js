(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4206],{37783:(e,t,s)=>{"use strict";s.d(t,{Aq:()=>i,Ay:()=>n});let r=s(70636).env.NEXT_PUBLIC_GATEWAY_URL||"https://gateway.rustplus.cn";class i{static formatDateTime(e){let t=new Date(e),s=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),n=String(t.getHours()).padStart(2,"0"),a=String(t.getMinutes()).padStart(2,"0");return"".concat(s,"-").concat(r,"-").concat(i," ").concat(n,":").concat(a)}static async copyToClipboard(e,t){let{onSuccess:s,onError:r}=t||{};try{if(navigator.clipboard&&window.isSecureContext)return await navigator.clipboard.writeText(e),null==s||s(),!0;let t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select();try{let e=document.execCommand("copy");if(document.body.removeChild(t),e)return null==s||s(),!0}catch(e){throw document.body.removeChild(t),e}return window.prompt("复制失败，请手动复制以下文本:",e),null==s||s(),!0}catch(e){return null==r||r(e instanceof Error?e:Error(String(e))),!1}}static toBoolean(e){return"string"==typeof e?"true"===(e=e.toLowerCase().trim())||"1"===e:!!e}static getGatewayUrl(e){return e.startsWith("/api/pay/")?"".concat(r).concat(e):e.startsWith("/api/")?"".concat(r,"/api/backend").concat(e.slice(4)):"".concat(r).concat(e)}static async backendFetch(e,t){return fetch(i.getGatewayUrl(e),{credentials:"include",...t}).then(e=>403===e.status?(window.location.pathname.startsWith("/login")||(window.location.href="/login"),Promise.reject(Error("Unauthorized"))):e).catch(e=>{throw e})}static getCookie(e){var t,s;let r="; ".concat(document.cookie).split("; ".concat(e,"="));if(2===r.length)return null!=(s=null==(t=r.pop())?void 0:t.split(";").shift())?s:""}static detectDevice(){if("undefined"==typeof navigator)return{isMobile:!1,isWechat:!1,isIOS:!1,isAndroid:!1};let e=navigator.userAgent;return{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e),isWechat:/MicroMessenger/i.test(e),isIOS:/iPhone|iPad|iPod/i.test(e),isAndroid:/Android/i.test(e)}}}let n={domain:"rustplus.cn",payWebUrl:"https://pay.rustplus.cn"}},49621:(e,t,s)=>{"use strict";s.d(t,{B:()=>i});class r{emit(e,t){var s;null==(s=this.listeners[e])||s.forEach(e=>e(t))}on(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}off(e,t){var s;this.listeners[e]=null==(s=this.listeners[e])?void 0:s.filter(e=>e!==t)}constructor(){this.listeners={}}}let i=new r},71379:(e,t,s)=>{Promise.resolve().then(s.bind(s,97975))},80420:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(95155),i=s(52619),n=s.n(i),a=s(75442),l=s(63646);s(12115);let o=e=>{let{href:t,children:s,iconSize:i=4,target:o="_blank",underline:d=!1,showIcon:c=!0}=e;return(0,r.jsx)(n(),{href:t,target:o,style:{color:"#818cf8",textDecoration:d?"underline":"none",transition:"color 0.2s"},onMouseEnter:e=>{e.currentTarget.style.color="#a5b4fc"},onMouseLeave:e=>{e.currentTarget.style.color="#818cf8"},children:c?(0,r.jsxs)(l.A,{size:i,children:[(0,r.jsx)(a.A,{}),s]}):s})}},97975:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>X});var r=s(95155);s(92932);var i=s(12115),n=s(19279),a=s(89543),l=s(86133),o=s(81184),d=s(65982),c=s(785),p=s(36060),u=s(21038),g=s(43561),x=s(39286),y=s(39578),h=s(63646),m=s(49073),b=s(15856),f=s(19374),j=s(14274),v=s(16638),A=s(43990),S=s(79),k=s(94260),w=s(44074),z=s(92199),B=s(90262),C=s(41738),R=s(67641),I=s(50329),P=s(97170),T=s(46878),E=s(67153),O=s(46172),_=s(87365),D=s(52492),N=s(48601),M=s(20058),V=s(57544),F=s(37076),L=s(32051),G=s(37783),H=s(20063),W=s(49621),U=s(80420);let q=G.Aq.backendFetch,{Text:J,Title:Y}=n.A,$=e=>{let{onSolve:t,apiEndpoint:s}=e,n=(0,i.useRef)(null);return(0,i.useEffect)(()=>{if(!n.current)return;n.current.innerHTML="";let e=document.createElement("cap-widget");e.setAttribute("data-cap-api-endpoint",s),e.setAttribute("data-cap-i18n-initial-state","我是人类"),e.setAttribute("data-cap-i18n-verifying-label","验证中..."),e.setAttribute("data-cap-i18n-solved-label","验证通过"),e.setAttribute("data-cap-i18n-error-label","验证失败，请重试"),n.current.appendChild(e);let r=e=>{t(e.detail.token)};return e.addEventListener("solve",r),()=>{e.removeEventListener("solve",r),n.current&&(n.current.innerHTML="")}},[s,t]),(0,r.jsx)("div",{ref:n})};function X(){var e,t,s,n,X,Z,K,Q,ee,et,es,er,ei,en;let ea,{message:el}=a.A.useApp(),eo=(0,H.useRouter)(),[ed,ec]=(0,i.useState)({callGroupCount:0,commandLogicCount:0,eventLogicCount:0,switchesCount:0,regularly_reset:"",appid:"",server:null}),[ep,eu]=(0,i.useState)(null),[eg,ex]=(0,i.useState)(!0),[ey,eh]=(0,i.useState)(""),[em,eb]=(0,i.useState)("https://rustplus.cn"),[ef,ej]=(0,i.useState)(!1),[ev,eA]=(0,i.useState)(""),[eS,ek]=(0,i.useState)(null),[ew,ez]=(0,i.useState)(!1),[eB,eC]=(0,i.useState)(!1),[eR,eI]=(0,i.useState)(!1),[eP,eT]=(0,i.useState)(!1),[eE]=l.A.useForm(),[eO,e_]=(0,i.useState)(!1),[eD,eN]=(0,i.useState)(""),[eM,eV]=(0,i.useState)(""),[eF,eL]=(0,i.useState)(!1),[eG,eH]=(0,i.useState)(null),[eW,eU]=(0,i.useState)(0),eq=(0,i.useCallback)(e=>{eH(e)},[]);(0,i.useEffect)(()=>{let e=document.createElement("script");return e.src="/cap-widget.js",e.async=!0,document.head.appendChild(e),()=>{e.parentNode&&e.parentNode.removeChild(e)}},[]);let[eJ,eY]=(0,i.useState)(!1),[e$,eX]=(0,i.useState)(!1),[eZ,eK]=(0,i.useState)(0),[eQ,e0]=(0,i.useState)(-1),[e1,e2]=(0,i.useState)(["wait","wait","wait","wait"]),[e5,e8]=(0,i.useState)(null),e4=(0,i.useRef)(!1),e6=(0,i.useRef)(null),[e3,e9]=(0,i.useState)(!1),[e7,te]=(0,i.useState)([]),[tt,ts]=(0,i.useState)(""),[tr,ti]=(0,i.useState)(""),[tn,ta]=(0,i.useState)(!0),[tl,to]=(0,i.useState)(null),[td,tc]=(0,i.useState)(!1),[tp,tu]=(0,i.useState)(null),[tg,tx]=(0,i.useState)(!1),[ty,th]=(0,i.useState)(null),tm=()=>{let e="abcdefghijklmnopqrstuvwxyz",t=Math.floor(5*Math.random())+6,s="";for(let r=0;r<t;r++)s+=e.charAt(Math.floor(Math.random()*e.length));return s},tb=["admin","superadmin","administrator","sysadmin","root","system","server","api","backend","dashboard","login","logout","signin","signout","register","signup","auth","authentication","oauth","password","reset-password","forgot-password","verify","account","home","index","main","welcome","profile","settings","config","configuration","preferences","user","users","member","members","customer","customers"],tf=async()=>{let e=await eE.getFieldValue("password");if(!e||""===e.trim()){el.success("未修改密码"),eT(!1);return}try{ez(!0);let t=await q("/api/f/setpassword",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e})}),s=await t.json();200===s.status?(el.success("密码更新成功"),eE.setFieldsValue({password:""}),eT(!1)):el.error(s.errmessage||"密码更新失败")}catch(e){console.error("Error updating password:",e)}finally{ez(!1)}},tj=async()=>{try{eC(!0);let e=await eE.validateFields(["path"]),t=await q("/api/f/setappid",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({appid:e.path})}),s=await t.json();200===s.status?(ec(t=>({...t,appid:e.path})),el.success("账号更新成功"),eI(!1)):el.error(s.errmessage||"账号更新失败")}catch(e){console.error("Error updating path:",e)}finally{eC(!1)}},tv=async()=>{if(!eD.trim())return void el.warning("请输入用户页账号");if(!eM.trim())return void el.warning("请输入用户页密码");if(!eG)return void el.warning("请先完成人机验证");eL(!0);try{let e=await q("/api/o/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({a:eD.trim(),password:eM,capToken:eG})}),t=await e.json();200===t.status?(el.success("验证成功，正在跳转..."),e_(!1),window.location.href="".concat(em,"/#/user/").concat(eD.trim())):(el.error(t.errmessage||"账号或密码错误"),eH(null),eU(e=>e+1))}catch(e){el.error("网络错误，请稍后重试"),eH(null),eU(e=>e+1)}finally{eL(!1)}},tA=()=>ef||null===eS||eS<=3?"#ef4444":eS<=7?"#f59e0b":"#10b981";(0,i.useEffect)(()=>{ey&&(e=>{let t=(e=>{try{let t=e.split(".")[0],s=atob(t);return JSON.parse(s).exp||null}catch(e){return null}})(e);if(!t){ej(!1),eA(""),ek(null);return}let s=Math.floor(Date.now()/1e3);ej(s>=t),ek(Math.ceil((t-s)/86400)),eA(new Date(1e3*t).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}))})(ey)},[ey]),(0,i.useEffect)(()=>{let e=()=>tS();return W.B.on("ADMIN_DATA_SERVER_UPDATE",e),()=>{W.B.off("ADMIN_DATA_SERVER_UPDATE",e)}},[]);let tS=async()=>{try{ex(!0);let[t,s]=await Promise.all([q("/api/f/gethomepageinfo",{method:"POST"}),q("/api/f/getscoreinfo",{method:"POST"})]),r=await t.json();if(200!==r.status)return void el.error(r.errmessage||"获取数据失败");let i=await s.json();if(200!==i.status)return void el.error(i.errmessage||"获取数据失败");if(eu(i.data),200===r.status){var e;if(r.data.regularly_reset&&(r.data.regularly_reset=r.data.regularly_reset.replace(/:\d{2}$/,"")),ec(r.data),!r.data.rustToken)return void eo.push("/admin/help/rusttoken");if(!r.data.server||0===Object.keys(r.data.server).length)return void eo.push("/admin/help/pairserver");if(!r.data.appid)return void eo.push("/admin/help/userpage");eh(r.data.rustToken||""),(null==(e=r.data.server)?void 0:e.playerId)&&ti(r.data.server.playerId);try{let e=await q("/api/f/getsteaminfo",{method:"POST"}),t=await e.json();200===t.status?W.B.emit("HOMEPAGE_DATA_LOADED",{steamProfile:t.data.steamProfile,steamBan:t.data.steamBan,rustToken:r.data.rustToken}):W.B.emit("HOMEPAGE_DATA_LOADED",{rustToken:r.data.rustToken})}catch(e){console.error("获取 Steam 信息失败:",e),W.B.emit("HOMEPAGE_DATA_LOADED",{rustToken:r.data.rustToken})}tR()}}catch(e){el.error("获取数据失败"),console.error("Error fetching data:",e)}finally{ex(!1)}};(0,i.useEffect)(()=>{eb(window.location.origin),tS()},[]),ea=0,ey&&ea++,ed.server&&ea++,ed.appid&&ea++;let tk=e=>new Promise(t=>setTimeout(t,e)),tw=(e,t)=>tk(Math.floor(Math.random()*(t-e+1))+e),tz=async()=>{e4.current=!1,e6.current=null,eK(0),e0(-1),e2(["process","wait","wait","wait"]),e8(null),eX(!0),eY(!0);let e=(async()=>{try{let e=await q("/api/f/reconnect",{method:"POST"}),t=await e.json();return e6.current=t,t}catch(e){return e6.current={error:!0,message:e instanceof Error?e.message:"Unknown error"},e6.current}})();try{if(await tk(1e3),e4.current||(eK(1),e2(["finish","process","wait","wait"]),await tk(5e3),e4.current)||(eK(2),e2(["finish","finish","process","wait"]),e0(0),e6.current?await tk(1e3):await tw(1e3,2e3),e4.current)||(e0(1),e6.current?await tk(1e3):await tw(1e3,4e3),e4.current)||(e0(2),e6.current?await tk(1e3):await tw(3e3,5e3),e4.current))return;let d=await e;if(e4.current)return;if(e0(3),d.error)e2(["finish","finish","error","wait"]),e8({frmSuccess:!1,rustSuccess:!1});else if(200===d.status){var t,s,r,i,n,a,l,o;let e=(null==(s=d.data)||null==(t=s.frm)?void 0:t.success)||(null==(i=d.data)||null==(r=i.frm)?void 0:r.receiver)==="already_exists",c=(null==(a=d.data)||null==(n=a.rust)?void 0:n.success)||(null==(o=d.data)||null==(l=o.rust)?void 0:l.receiver)==="already_exists";if(e&&c){if(e2(["finish","finish","finish","process"]),eK(3),await tw(5e3,7e3),e4.current)return;e2(["finish","finish","finish","finish"]),e8({frmSuccess:e,rustSuccess:c})}else e2(["finish","finish","finish","wait"]),e8({frmSuccess:e,rustSuccess:c})}else e2(["finish","finish","error","wait"]),e8({frmSuccess:!1,rustSuccess:!1})}catch(e){if(e4.current)return;e0(3),e2(["finish","finish","error","wait"]),e8({frmSuccess:!1,rustSuccess:!1})}finally{eY(!1)}},tB=()=>{e4.current=!0,eX(!1),eY(!1)},tC=async()=>{try{e9(!0);let e=await q("/api/f/saverusttoken",{method:"POST",body:JSON.stringify({token:""}),headers:{"Content-Type":"application/json"}}),t=await e.json();200===t.status?window.location.href="/admin":el.error(t.errmessage||"操作失败")}catch(e){el.error("操作失败")}finally{e9(!1)}},tR=async()=>{try{ta(!0);let e=await q("/api/f/getteammembers",{method:"POST"}),t=await e.json();200===t.status&&(te(t.data.members||[]),ts(t.data.leaderSteamId||""))}catch(e){console.error("获取队伍成员失败:",e)}finally{ta(!1)}},tI=async()=>{if(tp)try{to(tp.steamId);let e=await q("/api/f/changecaptain",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({targetSteamId:tp.steamId})}),t=await e.json();200===t.status?(el.success("已将队长更改为 ".concat(tp.name)),tc(!1),tR()):el.error(t.errmessage||"更改队长失败")}catch(e){el.error("更改队长失败")}finally{to(null)}},tP=[{icon:(0,r.jsx)(j.A,{}),title:"设备配对",desc:"配对游戏服务器",path:"/admin/device",color:"#6366f1"},{icon:(0,r.jsx)(v.A,{}),title:"事件逻辑",desc:"自动化触发规则",path:"/admin/eventlogic",color:"#8b5cf6"},{icon:(0,r.jsx)(A.A,{}),title:"指令逻辑",desc:"自定义指令响应",path:"/admin/commandlogic",color:"#ec4899"},{icon:(0,r.jsx)(S.A,{}),title:"呼叫组",desc:"预设呼叫配置",path:"/admin/callgroup",color:"#10b981"}];return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)(o.A,{gutter:[16,16],style:{marginBottom:20},children:[(0,r.jsx)(d.A,{xs:24,sm:12,lg:8,children:(0,r.jsxs)("div",{style:{padding:"16px 20px",background:"#27272c",borderRadius:14,border:"1px solid rgba(255,255,255,0.08)",display:"flex",alignItems:"center",gap:14},children:[(0,r.jsx)("div",{style:{width:44,height:44,borderRadius:12,background:"rgba(16, 185, 129, 0.15)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(k.A,{style:{fontSize:22,color:"#10b981"}})}),(0,r.jsxs)("div",{style:{flex:1},children:[(0,r.jsx)(J,{type:"secondary",style:{fontSize:12},children:"服务器状态"}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,r.jsx)(J,{strong:!0,style:{fontSize:15},children:"已配对"}),(0,r.jsx)(w.A,{style:{color:"#10b981",fontSize:14}})]})]})]})}),(0,r.jsx)(d.A,{xs:24,sm:12,lg:8,children:(0,r.jsxs)("div",{style:{padding:"16px 20px",background:ef||null!==eS&&eS<=2?"linear-gradient(135deg, rgba(245, 158, 11, 0.12) 0%, rgba(234, 138, 0, 0.08) 100%)":"#27272c",borderRadius:14,border:"1px solid ".concat(ef?"rgba(239, 68, 68, 0.3)":null!==eS&&eS<=2?"rgba(245, 158, 11, 0.25)":"rgba(255,255,255,0.08)"),display:"flex",alignItems:"center",gap:14,cursor:ef||null!==eS&&eS<=2?"pointer":"default"},onClick:ef||null!==eS&&eS<=2?tC:void 0,children:[(0,r.jsx)("div",{style:{width:44,height:44,borderRadius:12,background:ef?"rgba(239, 68, 68, 0.15)":null!==eS&&eS<=2?"rgba(245, 158, 11, 0.2)":"rgba(16, 185, 129, 0.15)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(z.A,{style:{fontSize:22,color:tA()}})}),(0,r.jsxs)("div",{style:{flex:1},children:[(0,r.jsx)(J,{type:"secondary",style:{fontSize:12},children:"Steam凭证"}),(0,r.jsx)(J,{strong:!0,style:{fontSize:15,color:tA()},children:ef?"已过期":"剩余 ".concat(eS," 天")})]}),(ef||null!==eS&&eS<=2)&&(0,r.jsx)(c.Ay,{size:"small",onClick:e=>{e.stopPropagation(),tC()},loading:e3,style:{borderRadius:6,background:"rgba(245, 158, 11, 0.15)",borderColor:"rgba(245, 158, 11, 0.3)",color:"#f59e0b"},children:"更新凭证"})]})}),(0,r.jsx)(d.A,{xs:24,sm:24,lg:8,children:(0,r.jsxs)("div",{style:{padding:"16px 20px",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.12) 0%, rgba(5, 150, 105, 0.12) 100%)",borderRadius:14,border:"1px solid rgba(16, 185, 129, 0.25)",display:"flex",alignItems:"center",gap:14,cursor:"pointer"},onClick:()=>eo.push("/admin/pay/products?tab=score"),children:[(0,r.jsx)("div",{style:{width:44,height:44,borderRadius:12,background:"rgba(16, 185, 129, 0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(A.A,{style:{fontSize:22,color:"#10b981"}})}),(0,r.jsxs)("div",{style:{flex:1},children:[(0,r.jsx)(J,{type:"secondary",style:{fontSize:12},children:"呼叫积分"}),(0,r.jsx)(J,{strong:!0,style:{fontSize:20,color:"#10b981"},children:null!=(ei=null==ep?void 0:ep.score)?ei:0})]}),(0,r.jsx)(B.A,{style:{color:"#10b981"}})]})})]}),(0,r.jsxs)("div",{style:{marginBottom:20},children:[(0,r.jsx)(J,{strong:!0,style:{fontSize:14,color:"rgba(255,255,255,0.7)",display:"block",marginBottom:12},children:"快捷操作"}),(0,r.jsx)(o.A,{gutter:[12,12],children:tP.map((e,t)=>(0,r.jsx)(d.A,{xs:12,sm:6,children:(0,r.jsxs)("div",{className:"quick-action",onClick:()=>eo.push(e.path),style:{padding:"16px 14px",background:"#27272c",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:12},children:[(0,r.jsx)("div",{style:{width:36,height:36,borderRadius:10,background:"linear-gradient(135deg, ".concat(e.color,"20 0%, ").concat(e.color,"10 100%)"),display:"flex",alignItems:"center",justifyContent:"center",color:e.color,fontSize:18},children:e.icon}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J,{strong:!0,style:{fontSize:13,display:"block"},children:e.title}),(0,r.jsx)(J,{type:"secondary",style:{fontSize:11},children:e.desc})]})]})},t))})]}),(0,r.jsxs)("div",{style:{marginBottom:20},children:[(0,r.jsx)(J,{strong:!0,style:{fontSize:14,color:"rgba(255,255,255,0.7)",display:"block",marginBottom:12},children:"常见问题"}),(0,r.jsxs)(o.A,{gutter:[12,12],children:[(0,r.jsx)(d.A,{xs:24,sm:12,children:(0,r.jsxs)("div",{style:{padding:16,background:"#27272c",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)"},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[(0,r.jsx)(j.A,{style:{fontSize:14,color:"#818cf8"}}),(0,r.jsx)(J,{strong:!0,style:{fontSize:13},children:"换服/加开关"})]}),(0,r.jsx)(J,{type:"secondary",style:{fontSize:12,display:"block",marginBottom:10},children:"进入游戏重新配对服务器或添加新开关"}),(0,r.jsx)(c.Ay,{size:"small",onClick:()=>window.open("https://www.rustplus.cn/docs/pdgame.html","_blank"),block:!0,style:{borderRadius:6},children:"查看教程"})]})}),(0,r.jsx)(d.A,{xs:24,sm:12,children:(0,r.jsxs)("div",{style:{padding:16,background:"#27272c",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)"},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[(0,r.jsx)(C.A,{style:{fontSize:14,color:"#10b981"}}),(0,r.jsx)(J,{strong:!0,style:{fontSize:13},children:"无响应"})]}),(0,r.jsx)(J,{type:"secondary",style:{fontSize:12,display:"block",marginBottom:10},children:"无法配对服务器或开关，机器人没响应"}),(0,r.jsx)(c.Ay,{size:"small",onClick:tz,loading:eJ,block:!0,style:{borderRadius:6},children:eJ?"重连中":"重新连接"})]})})]})]}),ed.server&&(0,r.jsxs)("div",{style:{marginBottom:24},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,r.jsxs)(Y,{level:5,style:{margin:0,color:"rgba(255,255,255,0.85)"},children:[(0,r.jsx)(S.A,{style:{marginRight:8}}),"队伍成员"]}),(0,r.jsx)(c.Ay,{type:"text",icon:(0,r.jsx)(R.A,{}),onClick:tR,loading:tn,size:"small",style:{color:"rgba(255,255,255,0.65)"},children:"刷新"})]}),tn?(0,r.jsxs)("div",{style:{padding:40,textAlign:"center",background:"#27272c",borderRadius:16,border:"1px solid rgba(255,255,255,0.08)"},children:[(0,r.jsx)(p.A,{}),(0,r.jsx)("div",{style:{marginTop:8},children:(0,r.jsx)(J,{type:"secondary",children:"加载中..."})})]}):e7.length>0?(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:e7.map(e=>{var t,s,i,n,a,l,o,d,p,y,h;let m=e.steamId===tt,b=(null==(t=e.steamBan)?void 0:t.VACBanned)||(null!=(y=null==(s=e.steamBan)?void 0:s.NumberOfVACBans)?y:0)>0,f=(null!=(h=null==(i=e.steamBan)?void 0:i.NumberOfGameBans)?h:0)>0,j=null==(n=e.steamBan)?void 0:n.CommunityBanned,v=(null==(a=e.steamProfile)?void 0:a.gameid)&&(null==(l=e.steamProfile)?void 0:l.gameextrainfo);return(0,r.jsxs)("div",{style:{padding:"12px 16px",borderRadius:12,background:"#27272c",border:v?"1px solid rgba(96, 165, 250, 0.3)":b||f||j?"1px solid rgba(239, 68, 68, 0.3)":"1px solid rgba(255,255,255,0.08)",position:"relative",overflow:"hidden",display:"flex",alignItems:"center",gap:14},children:[v&&(0,r.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundImage:"url(https://shared.st.dl.eccdnx.com/store_item_assets/steam/apps/".concat(null==(o=e.steamProfile)?void 0:o.gameid,"/header.jpg)"),backgroundSize:"cover",backgroundPosition:"center",opacity:.1,pointerEvents:"none"}}),(0,r.jsxs)("div",{style:{position:"relative",flexShrink:0,zIndex:1},children:[(null==(d=e.steamProfile)?void 0:d.avatarfull)?(0,r.jsx)(u.A,{src:e.steamProfile.avatarfull,size:48,style:{border:e.isOnline?"2px solid #52c41a":"2px solid #595959"}}):(0,r.jsx)(u.A,{icon:(0,r.jsx)(I.A,{}),size:48,style:{backgroundColor:e.isOnline?"#52c41a":"#595959"}}),(0,r.jsx)("div",{style:{position:"absolute",bottom:0,right:0,width:14,height:14,borderRadius:"50%",background:e.isOnline?"#52c41a":"#595959",border:"2px solid #27272c"}})]}),(0,r.jsxs)("div",{style:{flex:1,minWidth:0,zIndex:1},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6,flexWrap:"wrap",marginBottom:4},children:[(0,r.jsx)(J,{strong:!0,style:{fontSize:14},children:e.name}),m&&(0,r.jsxs)(g.A,{color:"gold",style:{margin:0,fontSize:10,lineHeight:"16px",padding:"0 5px"},children:[(0,r.jsx)(P.A,{})," 队长"]}),v&&(0,r.jsxs)(g.A,{color:"blue",style:{margin:0,fontSize:10,lineHeight:"16px",padding:"0 5px"},children:["\uD83C\uDFAE ",null==(p=e.steamProfile)?void 0:p.gameextrainfo]})]}),(0,r.jsxs)("div",{style:{fontSize:12,color:"rgba(255,255,255,0.45)",marginBottom:6},children:["SteamID: ",e.steamId]}),e.steamBan&&(0,r.jsxs)("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[(0,r.jsx)(x.A,{title:b?"".concat(e.steamBan.NumberOfVACBans," 次 VAC 封禁"):"VAC 无封禁",children:(0,r.jsxs)(g.A,{color:b?"error":"success",style:{margin:0,fontSize:10,lineHeight:"16px",padding:"0 5px",opacity:b?1:.7},children:["VAC ",b?e.steamBan.NumberOfVACBans:"✓"]})}),(0,r.jsx)(x.A,{title:f?"".concat(e.steamBan.NumberOfGameBans," 次游戏封禁"):"游戏封禁 无",children:(0,r.jsxs)(g.A,{color:f?"error":"success",style:{margin:0,fontSize:10,lineHeight:"16px",padding:"0 5px",opacity:f?1:.7},children:["游戏 ",f?e.steamBan.NumberOfGameBans:"✓"]})}),(0,r.jsx)(x.A,{title:j?"社区封禁":"社区正常",children:(0,r.jsxs)(g.A,{color:j?"error":"success",style:{margin:0,fontSize:10,lineHeight:"16px",padding:"0 5px",opacity:j?1:.7},children:["社区 ",j?"✗":"✓"]})})]})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",flexShrink:0,zIndex:1},children:[(0,r.jsx)(x.A,{title:"查看详情",children:(0,r.jsx)(c.Ay,{type:"text",size:"small",icon:(0,r.jsx)(I.A,{}),onClick:()=>{th(e),tx(!0)},style:{color:"rgba(255,255,255,0.65)"}})}),!m&&(0,r.jsx)(x.A,{title:"设为队长",children:(0,r.jsx)(c.Ay,{type:"text",size:"small",icon:(0,r.jsx)(P.A,{}),onClick:()=>(e=>{if(tr&&tt&&tr!==tt)return void el.error("您不是队长，无法切换队长");tu(e),tc(!0)})(e),loading:tl===e.steamId,disabled:null!==tl,style:{color:"#faad14"}})})]})]},e.steamId)})}):(0,r.jsx)("div",{style:{padding:40,textAlign:"center",background:"#27272c",borderRadius:16,border:"1px solid rgba(255,255,255,0.08)"},children:(0,r.jsx)(J,{type:"secondary",children:"暂无队伍成员数据"})})]}),(0,r.jsxs)(o.A,{gutter:[16,16],children:[(0,r.jsx)(d.A,{xs:24,md:12,children:(0,r.jsxs)(y.A,{title:(0,r.jsxs)(h.A,{children:[(0,r.jsx)(k.A,{}),(0,r.jsx)("span",{children:"服务器信息"})]}),loading:eg,extra:(0,r.jsx)(U.A,{href:"https://www.rustplus.cn/docs/pdgame.html",children:"配对教程"}),style:{background:"#27272c",borderRadius:16,border:"1px solid rgba(255,255,255,0.08)",height:"100%",overflow:"hidden",position:"relative"},children:[(null==(e=ed.server)?void 0:e.img)&&(0,r.jsx)("div",{style:{position:"absolute",top:0,right:0,width:"50%",height:"100%",backgroundImage:"url(".concat(ed.server.img,")"),backgroundSize:"cover",backgroundPosition:"center",opacity:.35,maskImage:"linear-gradient(to right, transparent 0%, rgba(0,0,0,0.5) 50%, black 100%)",WebkitMaskImage:"linear-gradient(to right, transparent 0%, rgba(0,0,0,0.5) 50%, black 100%)",pointerEvents:"none"}}),(0,r.jsxs)(h.A,{direction:"vertical",size:16,style:{width:"100%",position:"relative",zIndex:1},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(J,{type:"secondary",style:{fontSize:12},children:"服务器名称"}),(0,r.jsx)("div",{style:{marginTop:4,padding:"10px 14px",background:"rgba(255,255,255,0.03)",borderRadius:10},children:(0,r.jsx)(J,{children:(null==(t=ed.server)?void 0:t.name)||"未配置"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J,{type:"secondary",style:{fontSize:12},children:"服务器介绍"}),(0,r.jsx)("div",{style:{marginTop:4,padding:"10px 14px",background:"rgba(255,255,255,0.03)",borderRadius:10,maxHeight:150,overflowY:"auto"},children:(0,r.jsx)(J,{style:{whiteSpace:"pre-wrap",wordBreak:"break-word",display:"block",lineHeight:1.6},children:(null==(X=ed.server)||null==(n=X.desc)||null==(s=n.replace(/\\n/g,"\n"))?void 0:s.replace(/\\t/g,"  "))||"未配置"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J,{type:"secondary",style:{fontSize:12},children:"清档时间"}),(0,r.jsx)("div",{style:{marginTop:4,padding:"10px 14px",background:"rgba(255,255,255,0.03)",borderRadius:10},children:(0,r.jsx)(J,{children:ed.regularly_reset||"未设置"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J,{type:"secondary",style:{fontSize:12},children:"Rust 凭证状态"}),(0,r.jsx)("div",{style:{marginTop:4,padding:"10px 14px",background:ef?"rgba(239, 68, 68, 0.1)":"rgba(255,255,255,0.03)",borderRadius:10,border:ef?"1px solid rgba(239, 68, 68, 0.2)":"none"},children:ey?(0,r.jsx)(h.A,{children:ef?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T.A,{style:{color:"#ef4444"}}),(0,r.jsxs)(J,{style:{color:"#ef4444"},children:["已过期 (",ev,")"]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w.A,{style:{color:"#10b981"}}),(0,r.jsxs)(J,{style:{color:"#10b981"},children:["有效期至 ",ev]})]})}):(0,r.jsx)(J,{type:"warning",children:"未绑定"})})]}),(null==(Z=ed.server)?void 0:Z.ip)&&(null==(K=ed.server)?void 0:K.port)&&(0,r.jsxs)("div",{children:[(0,r.jsx)(J,{type:"secondary",style:{fontSize:12},children:"进服指令"}),(0,r.jsxs)("div",{style:{marginTop:4,padding:"10px 14px",background:"rgba(99, 102, 241, 0.1)",borderRadius:10,border:"1px solid rgba(99, 102, 241, 0.2)",display:"flex",alignItems:"center",justifyContent:"space-between",gap:12},children:[(0,r.jsxs)(J,{style:{fontFamily:"monospace",color:"#818cf8"},children:["connect ",ed.server.ip,":",ed.server.port]}),(0,r.jsx)(x.A,{title:"复制指令",children:(0,r.jsx)(c.Ay,{type:"primary",size:"small",icon:(0,r.jsx)(E.A,{}),onClick:async()=>{var e,t;await G.Aq.copyToClipboard("connect ".concat(null==(e=ed.server)?void 0:e.ip,":").concat(null==(t=ed.server)?void 0:t.port)),el.success("进服指令已复制")},style:{background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)",border:"none"},children:"复制"})})]})]})]})]})}),(0,r.jsx)(d.A,{xs:24,md:12,children:(0,r.jsx)(y.A,{title:(0,r.jsxs)(h.A,{children:[(0,r.jsx)(S.A,{}),(0,r.jsx)("span",{children:"用户页设置"})]}),style:{background:"#27272c",borderRadius:16,border:"1px solid rgba(255,255,255,0.08)",height:"100%"},children:(0,r.jsx)(l.A,{form:eE,layout:"vertical",children:(0,r.jsxs)(h.A,{direction:"vertical",size:16,style:{width:"100%"},children:[(0,r.jsx)("div",{style:{padding:"14px 16px",background:"linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%)",borderRadius:12,border:"1px solid rgba(99, 102, 241, 0.2)"},children:(0,r.jsxs)(h.A,{align:"start",children:[(0,r.jsx)(S.A,{style:{fontSize:20,color:"#818cf8",marginTop:2}}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J,{strong:!0,style:{display:"block",marginBottom:4},children:"队友控制面板"}),(0,r.jsx)(J,{type:"secondary",style:{fontSize:13},children:"将账号和密码分享给队友，让他们通过网页控制您配对的智能开关"})]})]})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:4},children:[(0,r.jsxs)(J,{type:"secondary",style:{fontSize:12},children:[(0,r.jsx)(I.A,{style:{marginRight:4}}),"用户页账号"]}),ed.appid&&!eR&&(0,r.jsx)(c.Ay,{type:"link",size:"small",icon:(0,r.jsx)(O.A,{}),onClick:()=>{eI(!0),eE.setFieldsValue({path:ed.appid})},style:{padding:0,height:"auto",color:"#818cf8"},children:"修改"})]}),eR||!ed.appid?(0,r.jsxs)("div",{style:{padding:"12px 14px",background:"rgba(255,255,255,0.03)",borderRadius:10},children:[(0,r.jsx)(l.A.Item,{name:"path",rules:[{validator:(e,t)=>t?t.length>32?Promise.reject(Error("路径长度不能超过32个字符")):tb.includes(t.toLowerCase())?Promise.reject(Error("不能使用保留关键字")):/^[a-zA-Z0-9_-]+$/.test(t)?Promise.resolve():Promise.reject(Error("只能包含字母、数字、_和-")):Promise.reject(Error("请输入用户页路径"))}],style:{marginBottom:8},children:(0,r.jsx)(m.A,{autoComplete:"off",placeholder:"设置用户页账号",style:{background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:8}})}),(0,r.jsxs)(h.A,{children:[(0,r.jsx)(c.Ay,{type:"primary",size:"small",icon:(0,r.jsx)(_.A,{}),onClick:tj,loading:eB,style:{background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)",border:"none"},children:"保存"}),(0,r.jsx)(c.Ay,{size:"small",icon:(0,r.jsx)(D.A,{}),onClick:()=>eE.setFieldsValue({path:tm()}),children:"随机"}),ed.appid&&(0,r.jsx)(c.Ay,{size:"small",onClick:()=>eI(!1),children:"取消"})]})]}):(0,r.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,r.jsx)(c.Ay,{type:"primary",icon:(0,r.jsx)(N.A,{}),onClick:async()=>{let e="用户页账号: ".concat(ed.appid,"\n访问地址: ").concat(em,"/#/user/").concat(ed.appid,"\n\n请在登录页点击「用户页」按钮，输入账号和密码即可访问");await G.Aq.copyToClipboard(e),el.success("分享信息已复制，发送给队友即可")},style:{flex:1,height:40,borderRadius:10,background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)",border:"none"},children:"分享用户页"}),(0,r.jsx)(c.Ay,{icon:(0,r.jsx)(B.A,{}),onClick:()=>e_(!0),style:{flex:1,height:40,borderRadius:10,background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)"},children:"访问他人用户页"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:4},children:[(0,r.jsxs)(J,{type:"secondary",style:{fontSize:12},children:[(0,r.jsx)(M.A,{style:{marginRight:4}}),"用户页密码"]}),!eP&&(0,r.jsx)(c.Ay,{type:"link",size:"small",icon:(0,r.jsx)(O.A,{}),onClick:()=>eT(!0),style:{padding:0,height:"auto",color:"#818cf8"},children:"修改"})]}),eP?(0,r.jsxs)("div",{style:{padding:"12px 14px",background:"rgba(255,255,255,0.03)",borderRadius:10},children:[(0,r.jsx)(l.A.Item,{name:"password",rules:[{max:20,message:"密码长度不能超过20个字符"}],style:{marginBottom:8},children:(0,r.jsx)(m.A.Password,{autoComplete:"off",placeholder:"设置新密码（留空则不修改）",style:{background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:8}})}),(0,r.jsxs)(h.A,{children:[(0,r.jsx)(c.Ay,{type:"primary",size:"small",icon:(0,r.jsx)(_.A,{}),onClick:tf,loading:ew,style:{background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)",border:"none"},children:"保存"}),(0,r.jsx)(c.Ay,{size:"small",icon:(0,r.jsx)(D.A,{}),onClick:()=>eE.setFieldsValue({password:tm()}),children:"随机"}),(0,r.jsx)(c.Ay,{size:"small",onClick:()=>{eT(!1),eE.setFieldsValue({password:""})},children:"取消"})]})]}):(0,r.jsx)("div",{style:{padding:"10px 14px",background:"rgba(255,255,255,0.03)",borderRadius:10},children:(0,r.jsx)(J,{type:"secondary",style:{fontSize:13},children:"队友访问用户页时需要输入此密码"})})]}),ed.appid&&(0,r.jsxs)(o.A,{gutter:[12,12],children:[(0,r.jsx)(d.A,{span:12,children:(0,r.jsxs)("div",{style:{padding:"10px 12px",background:"rgba(255,255,255,0.03)",borderRadius:10,textAlign:"center"},children:[(0,r.jsx)(k.A,{style:{fontSize:18,color:"#10b981",marginBottom:4}}),(0,r.jsx)(J,{style:{display:"block",fontSize:12},children:"实时服务器信息"})]})}),(0,r.jsx)(d.A,{span:12,children:(0,r.jsxs)("div",{style:{padding:"10px 12px",background:"rgba(255,255,255,0.03)",borderRadius:10,textAlign:"center"},children:[(0,r.jsx)(A.A,{style:{fontSize:18,color:"#f59e0b",marginBottom:4}}),(0,r.jsx)(J,{style:{display:"block",fontSize:12},children:"远程开关控制"})]})}),(0,r.jsx)(d.A,{span:12,children:(0,r.jsxs)("div",{style:{padding:"10px 12px",background:"rgba(255,255,255,0.03)",borderRadius:10,textAlign:"center"},children:[(0,r.jsx)(I.A,{style:{fontSize:18,color:"#818cf8",marginBottom:4}}),(0,r.jsx)(J,{style:{display:"block",fontSize:12},children:"队员信息"})]})}),(0,r.jsx)(d.A,{span:12,children:(0,r.jsxs)("div",{style:{padding:"10px 12px",background:"rgba(255,255,255,0.03)",borderRadius:10,textAlign:"center"},children:[(0,r.jsx)(V.A,{style:{fontSize:18,color:"#ec4899",marginBottom:4}}),(0,r.jsx)(J,{style:{display:"block",fontSize:12},children:"聊天记录"})]})})]})]})})})})]}),(0,r.jsx)(b.A,{title:(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,r.jsx)(P.A,{style:{color:"#faad14",fontSize:20}}),(0,r.jsx)("span",{children:"确认更改队长"})]}),open:td,onCancel:()=>tc(!1),footer:[(0,r.jsx)(c.Ay,{onClick:()=>tc(!1),style:{borderRadius:6,boxShadow:"none"},children:"取消"},"cancel"),(0,r.jsx)(c.Ay,{type:"primary",loading:null!==tl,onClick:tI,style:{borderRadius:6,boxShadow:"none",background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)",border:"none"},children:"确认更改"},"confirm")],centered:!0,width:400,children:(0,r.jsxs)("div",{style:{padding:"16px 0"},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,padding:16,borderRadius:8,background:"rgba(250, 173, 20, 0.1)",border:"1px solid rgba(250, 173, 20, 0.2)",marginBottom:16},children:[(null==tp||null==(Q=tp.steamProfile)?void 0:Q.avatarfull)?(0,r.jsx)(u.A,{src:tp.steamProfile.avatarfull,size:48}):(0,r.jsx)(u.A,{icon:(0,r.jsx)(I.A,{}),size:48,style:{backgroundColor:"#faad14"}}),(0,r.jsxs)("div",{children:[(0,r.jsx)(J,{strong:!0,style:{fontSize:16,display:"block"},children:null==tp?void 0:tp.name}),(0,r.jsx)(J,{type:"secondary",style:{fontSize:12},children:null==tp?void 0:tp.steamId})]})]}),(0,r.jsxs)(J,{style:{display:"block",color:"rgba(255,255,255,0.85)"},children:["确定要将队长更改为 ",(0,r.jsx)(J,{strong:!0,style:{color:"#faad14"},children:null==tp?void 0:tp.name})," 吗？"]}),(0,r.jsx)(J,{type:"secondary",style:{display:"block",marginTop:8,fontSize:12},children:"更改后，游戏内会收到通知。"})]})}),(0,r.jsx)(b.A,{title:"重新连接",open:e$,onCancel:tB,footer:e5?e5.frmSuccess&&e5.rustSuccess?(0,r.jsx)(c.Ay,{type:"primary",onClick:tB,style:{boxShadow:"none"},children:"确定"}):e5.frmSuccess?e5.rustSuccess?(0,r.jsxs)(h.A,{children:[(0,r.jsx)(c.Ay,{onClick:tB,style:{boxShadow:"none"},children:"关闭"}),(0,r.jsx)(c.Ay,{type:"primary",icon:(0,r.jsx)(R.A,{}),onClick:tz,style:{boxShadow:"none"},children:"再次重连"})]}):(0,r.jsxs)(h.A,{children:[(0,r.jsx)(c.Ay,{onClick:tB,style:{boxShadow:"none"},children:"关闭"}),(0,r.jsx)(c.Ay,{type:"primary",icon:(0,r.jsx)(R.A,{}),onClick:tz,style:{boxShadow:"none"},children:"重连"})]}):(0,r.jsxs)(h.A,{children:[(0,r.jsx)(c.Ay,{onClick:tB,style:{boxShadow:"none"},children:"关闭"}),(0,r.jsx)(c.Ay,{type:"primary",icon:(0,r.jsx)(R.A,{}),onClick:()=>{tB(),tC()},loading:e3,style:{boxShadow:"none"},children:"重新配对Steam"})]}):(0,r.jsx)(c.Ay,{onClick:tB,style:{boxShadow:"none"},children:"关闭弹窗"}),closable:!0,maskClosable:!1,width:420,children:(0,r.jsxs)("div",{style:{padding:"20px 0"},children:[(0,r.jsx)(f.A,{direction:"vertical",size:"small",current:eZ,items:[{title:"正在请求服务器",status:e1[0],icon:"process"===e1[0]?(0,r.jsx)(F.A,{}):"finish"===e1[0]?(0,r.jsx)(w.A,{style:{color:"#52c41a"}}):"error"===e1[0]?(0,r.jsx)(L.A,{style:{color:"#ff4d4f"}}):void 0},{title:"正在寻找对应节点",status:e1[1],icon:"process"===e1[1]?(0,r.jsx)(F.A,{}):"finish"===e1[1]?(0,r.jsx)(w.A,{style:{color:"#52c41a"}}):"error"===e1[1]?(0,r.jsx)(L.A,{style:{color:"#ff4d4f"}}):void 0},{title:"正在处理...",status:e1[2],icon:"process"===e1[2]?(0,r.jsx)(F.A,{}):"finish"===e1[2]?(0,r.jsx)(w.A,{style:{color:"#52c41a"}}):"error"===e1[2]?(0,r.jsx)(L.A,{style:{color:"#ff4d4f"}}):void 0,description:"process"===e1[2]||"finish"===e1[2]?(0,r.jsxs)("div",{style:{marginTop:8,marginLeft:4},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:6},children:[0===eQ?(0,r.jsx)(F.A,{style:{fontSize:12}}):eQ>0?(0,r.jsx)(w.A,{style:{fontSize:12,color:"#52c41a"}}):(0,r.jsx)("span",{style:{width:12,height:12,display:"inline-block"}}),(0,r.jsx)(J,{type:"secondary",style:{fontSize:12},children:"正在关闭已有连接"})]}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:6},children:[1===eQ?(0,r.jsx)(F.A,{style:{fontSize:12}}):eQ>1?(0,r.jsx)(w.A,{style:{fontSize:12,color:"#52c41a"}}):(0,r.jsx)("span",{style:{width:12,height:12,display:"inline-block"}}),(0,r.jsx)(J,{type:"secondary",style:{fontSize:12},children:"正在重新分配节点"})]}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[2===eQ?(0,r.jsx)(F.A,{style:{fontSize:12}}):eQ>2||"finish"===e1[2]?(0,r.jsx)(w.A,{style:{fontSize:12,color:"#52c41a"}}):(0,r.jsx)("span",{style:{width:12,height:12,display:"inline-block"}}),(0,r.jsx)(J,{type:"secondary",style:{fontSize:12},children:"正在重新连接"})]})]}):void 0},..."finish"===e1[2]&&"wait"!==e1[3]?[{title:"节点正在初始化...",status:e1[3],icon:"process"===e1[3]?(0,r.jsx)(F.A,{}):"finish"===e1[3]?(0,r.jsx)(w.A,{style:{color:"#52c41a"}}):"error"===e1[3]?(0,r.jsx)(L.A,{style:{color:"#ff4d4f"}}):void 0}]:[]]}),e5&&(0,r.jsxs)("div",{style:{marginTop:20},children:[(0,r.jsx)("div",{style:{padding:12,borderRadius:8,background:e5.frmSuccess&&e5.rustSuccess?"rgba(82, 196, 26, 0.1)":"rgba(255, 77, 79, 0.1)",border:"1px solid ".concat(e5.frmSuccess&&e5.rustSuccess?"rgba(82, 196, 26, 0.3)":"rgba(255, 77, 79, 0.3)"),marginBottom:12,textAlign:"center"},children:(0,r.jsx)(J,{strong:!0,style:{color:e5.frmSuccess&&e5.rustSuccess?"#52c41a":"#ff4d4f",fontSize:15},children:e5.frmSuccess&&e5.rustSuccess?"✓ 重连成功":"✗ 重连失败"})}),(0,r.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,r.jsx)("div",{style:{flex:1,padding:10,borderRadius:8,background:e5.frmSuccess?"rgba(82, 196, 26, 0.1)":"rgba(255, 77, 79, 0.1)",border:"1px solid ".concat(e5.frmSuccess?"rgba(82, 196, 26, 0.3)":"rgba(255, 77, 79, 0.3)"),textAlign:"center"},children:(0,r.jsxs)(J,{style:{color:e5.frmSuccess?"#52c41a":"#ff4d4f",fontSize:13},children:[e5.frmSuccess?"✓":"✗"," 配对服务"]})}),(0,r.jsx)("div",{style:{flex:1,padding:10,borderRadius:8,background:e5.rustSuccess?"rgba(82, 196, 26, 0.1)":"rgba(255, 77, 79, 0.1)",border:"1px solid ".concat(e5.rustSuccess?"rgba(82, 196, 26, 0.3)":"rgba(255, 77, 79, 0.3)"),textAlign:"center"},children:(0,r.jsxs)(J,{style:{color:e5.rustSuccess?"#52c41a":"#ff4d4f",fontSize:13},children:[e5.rustSuccess?"✓":"✗"," Rust服务"]})})]})]})]})}),(0,r.jsx)(b.A,{title:null,open:tg,onCancel:()=>tx(!1),footer:null,centered:!0,width:420,children:(0,r.jsx)("div",{style:{padding:"8px 0"},children:ty?(0,r.jsxs)(r.Fragment,{children:[(null==(ee=ty.steamProfile)?void 0:ee.gameid)&&(0,r.jsxs)("div",{style:{position:"relative",marginBottom:20,borderRadius:12,overflow:"hidden"},children:[(0,r.jsx)("img",{src:"https://shared.st.dl.eccdnx.com/store_item_assets/steam/apps/".concat(ty.steamProfile.gameid,"/header.jpg"),alt:"Game",style:{width:"100%",height:120,objectFit:"cover",objectPosition:"center"}}),(0,r.jsx)("div",{style:{position:"absolute",bottom:0,left:0,right:0,padding:"8px 12px",background:"linear-gradient(transparent, rgba(0,0,0,0.8))"},children:(0,r.jsxs)(g.A,{color:"blue",style:{margin:0},children:["\uD83C\uDFAE 正在游玩: ",ty.steamProfile.gameextrainfo]})})]}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:16,marginBottom:20},children:[(0,r.jsxs)("div",{style:{position:"relative"},children:[(null==(et=ty.steamProfile)?void 0:et.avatarfull)?(0,r.jsx)(u.A,{src:ty.steamProfile.avatarfull,size:72,style:{border:ty.isOnline?"3px solid #52c41a":"3px solid #595959"}}):(0,r.jsx)(u.A,{icon:(0,r.jsx)(I.A,{}),size:72,style:{background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)"}}),(0,r.jsx)("div",{style:{position:"absolute",bottom:2,right:2,width:18,height:18,borderRadius:"50%",background:ty.isOnline?"#52c41a":"#595959",border:"3px solid #1f1f23"}})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4},children:[(0,r.jsx)(J,{strong:!0,style:{fontSize:18},children:ty.name}),ty.steamId===tt&&(0,r.jsxs)(g.A,{color:"gold",style:{margin:0},children:[(0,r.jsx)(P.A,{})," 队长"]})]}),(0,r.jsx)(J,{type:"secondary",style:{fontSize:13},children:ty.isOnline?"\uD83D\uDFE2 在线":"⚫ 离线"})]})]}),(0,r.jsx)("div",{style:{padding:14,borderRadius:10,background:"rgba(99, 102, 241, 0.08)",border:"1px solid rgba(99, 102, 241, 0.15)",marginBottom:16},children:(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(J,{type:"secondary",style:{fontSize:12,display:"block"},children:"SteamID"}),(0,r.jsx)(J,{style:{fontSize:14,fontFamily:"monospace"},children:ty.steamId})]}),(0,r.jsx)(c.Ay,{type:"text",size:"small",onClick:async()=>{await G.Aq.copyToClipboard(ty.steamId||""),el.success("已复制 SteamID")},style:{color:"#818cf8"},children:"复制"})]})}),ty.steamBan&&(0,r.jsxs)("div",{style:{padding:14,borderRadius:10,background:ty.steamBan.VACBanned||ty.steamBan.NumberOfGameBans||ty.steamBan.CommunityBanned?"rgba(239, 68, 68, 0.1)":"rgba(16, 185, 129, 0.1)",border:ty.steamBan.VACBanned||ty.steamBan.NumberOfGameBans||ty.steamBan.CommunityBanned?"1px solid rgba(239, 68, 68, 0.2)":"1px solid rgba(16, 185, 129, 0.2)",marginBottom:16},children:[(0,r.jsx)(J,{strong:!0,style:{display:"block",marginBottom:8,color:ty.steamBan.VACBanned||ty.steamBan.NumberOfGameBans||ty.steamBan.CommunityBanned?"#f87171":"#6ee7b7"},children:ty.steamBan.VACBanned||ty.steamBan.NumberOfGameBans||ty.steamBan.CommunityBanned?"⚠️ 存在封禁记录":"✓ 账号状态良好"}),(0,r.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[(0,r.jsxs)("span",{style:{padding:"2px 8px",borderRadius:4,fontSize:12,background:ty.steamBan.VACBanned?"rgba(239, 68, 68, 0.2)":"rgba(16, 185, 129, 0.2)",color:ty.steamBan.VACBanned?"#f87171":"#6ee7b7"},children:["VAC: ",ty.steamBan.NumberOfVACBans||0]}),(0,r.jsxs)("span",{style:{padding:"2px 8px",borderRadius:4,fontSize:12,background:ty.steamBan.NumberOfGameBans?"rgba(239, 68, 68, 0.2)":"rgba(16, 185, 129, 0.2)",color:ty.steamBan.NumberOfGameBans?"#f87171":"#6ee7b7"},children:["游戏封禁: ",ty.steamBan.NumberOfGameBans||0]}),(0,r.jsxs)("span",{style:{padding:"2px 8px",borderRadius:4,fontSize:12,background:ty.steamBan.CommunityBanned?"rgba(239, 68, 68, 0.2)":"rgba(16, 185, 129, 0.2)",color:ty.steamBan.CommunityBanned?"#f87171":"#6ee7b7"},children:["社区: ",ty.steamBan.CommunityBanned?"封禁":"正常"]})]}),(null!=(en=ty.steamBan.DaysSinceLastBan)?en:0)>0&&(0,r.jsxs)(J,{type:"secondary",style:{fontSize:11,display:"block",marginTop:6},children:["距上次封禁 ",ty.steamBan.DaysSinceLastBan," 天"]})]}),(null==(es=ty.steamProfile)?void 0:es.timecreated)&&(0,r.jsxs)("div",{style:{padding:14,borderRadius:10,background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.06)",marginBottom:16},children:[(0,r.jsx)(J,{strong:!0,style:{fontSize:13,display:"block",marginBottom:10,color:"rgba(255,255,255,0.85)"},children:"账号信息"}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[(0,r.jsx)(J,{type:"secondary",style:{fontSize:13},children:"注册时间"}),(0,r.jsx)(J,{style:{fontSize:13},children:new Date(1e3*ty.steamProfile.timecreated).toLocaleDateString("zh-CN")})]}),ty.steamProfile.loccountrycode&&(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[(0,r.jsx)(J,{type:"secondary",style:{fontSize:13},children:"地区"}),(0,r.jsx)(J,{style:{fontSize:13},children:ty.steamProfile.loccountrycode})]}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,r.jsx)(J,{type:"secondary",style:{fontSize:13},children:"账号年龄"}),(0,r.jsxs)(J,{style:{fontSize:13},children:[Math.floor((Date.now()/1e3-ty.steamProfile.timecreated)/31536e3)," 年"]})]})]}),(null==(er=ty.steamProfile)?void 0:er.profileurl)&&(0,r.jsx)(c.Ay,{type:"primary",block:!0,onClick:()=>{var e;return window.open(null==(e=ty.steamProfile)?void 0:e.profileurl,"_blank")},style:{height:40,borderRadius:10,background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)",border:"none"},children:"查看 Steam 主页"})]}):(0,r.jsx)("div",{style:{textAlign:"center",padding:"20px 0"},children:(0,r.jsx)(p.A,{})})})}),(0,r.jsx)(b.A,{title:(0,r.jsxs)("span",{children:[(0,r.jsx)(B.A,{style:{marginRight:8}}),"访问他人用户页"]}),open:eO,onCancel:()=>{e_(!1),eN(""),eV(""),eH(null),eU(e=>e+1)},footer:null,width:400,children:(0,r.jsxs)("div",{style:{padding:"8px 0"},children:[(0,r.jsx)("div",{style:{padding:"12px 16px",background:"rgba(99, 102, 241, 0.1)",borderRadius:10,border:"1px solid rgba(99, 102, 241, 0.2)",marginBottom:20},children:(0,r.jsx)(J,{style:{color:"rgba(255,255,255,0.85)",fontSize:13,lineHeight:1.6},children:"输入队友分享给您的用户页账号和密码，即可通过网页控制队友配对的智能开关。"})}),(0,r.jsxs)(l.A,{layout:"vertical",children:[(0,r.jsx)(l.A.Item,{label:(0,r.jsx)(J,{type:"secondary",style:{fontSize:13},children:"用户页账号"}),style:{marginBottom:12},children:(0,r.jsx)(m.A,{placeholder:"输入用户页账号",value:eD,onChange:e=>eN(e.target.value),style:{background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:10,height:44}})}),(0,r.jsx)(l.A.Item,{label:(0,r.jsx)(J,{type:"secondary",style:{fontSize:13},children:"用户页密码"}),style:{marginBottom:12},children:(0,r.jsx)(m.A.Password,{placeholder:"输入用户页密码",value:eM,onChange:e=>eV(e.target.value),style:{background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:10,height:44}})}),(0,r.jsxs)("div",{style:{marginBottom:16},children:[(0,r.jsx)("style",{children:"\n                                cap-widget {\n                                    --cap-background: rgba(255, 255, 255, 0.03);\n                                    --cap-border-color: rgba(255, 255, 255, 0.08);\n                                    --cap-color: rgba(255, 255, 255, 0.85);\n                                    --cap-checkbox-background: rgba(255, 255, 255, 0.05);\n                                    --cap-checkbox-border: 1px solid rgba(255, 255, 255, 0.15);\n                                    --cap-spinner-color: #6366f1;\n                                    --cap-spinner-background-color: rgba(255, 255, 255, 0.1);\n                                    --cap-widget-width: 100%;\n                                    --cap-border-radius: 12px;\n                                }\n                                cap-widget::part(attribution) {\n                                    display: none !important;\n                                }\n                            "}),(0,r.jsx)($,{onSolve:eq,apiEndpoint:"https://cap.rustplus.cn/336bfb3b1a/"},eW)]}),(0,r.jsx)(c.Ay,{type:"primary",block:!0,loading:eF,disabled:!eG,onClick:tv,style:{height:44,borderRadius:10,background:eG?"linear-gradient(135deg, #6366f1 0%, #4f46e5 100%)":"rgba(255,255,255,0.1)",border:"none",fontWeight:500},children:"访问"})]})]})})]})}}},e=>{e.O(0,[4041,6083,785,6240,9279,2245,9543,5445,9073,6060,4540,9578,6133,6861,8824,2062,2502,2073,8441,1255,7358],()=>e(e.s=71379)),_N_E=e.O()}]);