(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8858],{79:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var a=r(12115);let n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M824.2 699.9a301.55 301.55 0 00-86.4-60.4C783.1 602.8 812 546.8 812 484c0-110.8-92.4-201.7-203.2-200-109.1 1.7-197 90.6-197 200 0 62.8 29 118.8 74.2 155.5a300.95 300.95 0 00-86.4 60.4C345 754.6 314 826.8 312 903.8a8 8 0 008 8.2h56c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5A226.62 226.62 0 01612 684c60.9 0 118.2 23.7 161.3 66.8C814.5 792 838 846.3 840 904.3c.1 4.3 3.7 7.7 8 7.7h56a8 8 0 008-8.2c-2-77-33-149.2-87.8-203.9zM612 612c-34.2 0-66.4-13.3-90.5-37.5a126.86 126.86 0 01-37.5-91.8c.3-32.8 13.4-64.5 36.3-88 24-24.6 56.1-38.3 90.4-38.7 33.9-.3 66.8 12.9 91 36.6 24.8 24.3 38.4 56.8 38.4 91.4 0 34.2-13.3 66.3-37.5 90.5A127.3 127.3 0 01612 612zM361.5 510.4c-.9-8.7-1.4-17.5-1.4-26.4 0-15.9 1.5-31.4 4.3-46.5.7-3.6-1.2-7.3-4.5-8.8-13.6-6.1-26.1-14.5-36.9-25.1a127.54 127.54 0 01-38.7-95.4c.9-32.1 13.8-62.6 36.3-85.6 24.7-25.3 57.9-39.1 93.2-38.7 31.9.3 62.7 12.6 86 34.4 7.9 7.4 14.7 15.6 20.4 24.4 2 3.1 5.9 4.4 9.3 3.2 17.6-6.1 36.2-10.4 55.3-12.4 5.6-.6 8.8-6.6 6.3-11.6-32.5-64.3-98.9-108.7-175.7-109.9-110.9-1.7-203.3 89.2-203.3 199.9 0 62.8 28.9 118.8 74.2 155.5-31.8 14.7-61.1 35-86.5 60.4-54.8 54.7-85.8 126.9-87.8 204a8 8 0 008 8.2h56.1c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5 29.4-29.4 65.4-49.8 104.7-59.7 3.9-1 6.5-4.7 6-8.7z"}}]},name:"team",theme:"outlined"};var i=r(26240);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}let c=a.forwardRef((e,t)=>a.createElement(i.A,s({},e,{ref:t,icon:n})))},2995:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var a=r(12115);let n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"};var i=r(26240);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}let c=a.forwardRef((e,t)=>a.createElement(i.A,s({},e,{ref:t,icon:n})))},37783:(e,t,r)=>{"use strict";r.d(t,{Aq:()=>n,Ay:()=>i});let a="https://gateway.rustplus.cn";class n{static formatDateTime(e){let t=new Date(e),r=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0");return"".concat(r,"-").concat(a,"-").concat(n," ").concat(i,":").concat(s)}static async copyToClipboard(e,t){let{onSuccess:r,onError:a}=t||{};try{if(navigator.clipboard&&window.isSecureContext)return await navigator.clipboard.writeText(e),null==r||r(),!0;let t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select();try{let e=document.execCommand("copy");if(document.body.removeChild(t),e)return null==r||r(),!0}catch(e){throw document.body.removeChild(t),e}return window.prompt("复制失败，请手动复制以下文本:",e),null==r||r(),!0}catch(e){return null==a||a(e instanceof Error?e:Error(String(e))),!1}}static toBoolean(e){return"string"==typeof e?"true"===(e=e.toLowerCase().trim())||"1"===e:!!e}static getGatewayUrl(e){return e.startsWith("/api/pay/")||e.startsWith("/api/notice/")?"".concat(a).concat(e):e.startsWith("/api/")?"".concat(a,"/api/backend").concat(e.slice(4)):"".concat(a).concat(e)}static async backendFetch(e,t){return fetch(n.getGatewayUrl(e),{credentials:"include",...t}).then(e=>403===e.status?(window.location.pathname.startsWith("/login")||(window.location.href="/login"),Promise.reject(Error("Unauthorized"))):e).catch(e=>{throw e})}static getCookie(e){var t,r;let a="; ".concat(document.cookie).split("; ".concat(e,"="));if(2===a.length)return null!=(r=null==(t=a.pop())?void 0:t.split(";").shift())?r:""}static detectDevice(){if("undefined"==typeof navigator)return{isMobile:!1,isWechat:!1,isIOS:!1,isAndroid:!1};let e=navigator.userAgent;return{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e),isWechat:/MicroMessenger/i.test(e),isIOS:/iPhone|iPad|iPod/i.test(e),isAndroid:/Android/i.test(e)}}}let i={domain:"rustplus.cn",payWebUrl:"https://pay.rustplus.cn"}},63646:(e,t,r)=>{"use strict";r.d(t,{A:()=>f});var a=r(12115),n=r(85203),i=r.n(n),s=r(46734);function c(e){return["small","middle","large"].includes(e)}function l(e){return!!e&&"number"==typeof e&&!Number.isNaN(e)}var o=r(1943),d=r(51511);let u=a.createContext({latestIndex:0}),p=u.Provider,y=e=>{let{className:t,index:r,children:n,split:i,style:s}=e,{latestIndex:c}=a.useContext(u);return null==n?null:a.createElement(a.Fragment,null,a.createElement("div",{className:t,style:s},n),r<c&&i&&a.createElement("span",{className:"".concat(t,"-split")},i))};var m=r(73513),h=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)0>t.indexOf(a[n])&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r};let g=a.forwardRef((e,t)=>{var r;let{getPrefixCls:n,direction:d,size:u,className:g,style:f,classNames:x,styles:v}=(0,o.TP)("space"),{size:j=null!=u?u:"small",align:b,className:A,rootClassName:w,children:O,direction:S="horizontal",prefixCls:C,split:k,style:N,wrap:z=!1,classNames:E,styles:P}=e,M=h(e,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap","classNames","styles"]),[T,B]=Array.isArray(j)?j:[j,j],W=c(B),_=c(T),R=l(B),D=l(T),I=(0,s.A)(O,{keepEmpty:!0}),G=void 0===b&&"horizontal"===S?"center":b,L=n("space",C),[U,F,q]=(0,m.A)(L),H=i()(L,g,F,"".concat(L,"-").concat(S),{["".concat(L,"-rtl")]:"rtl"===d,["".concat(L,"-align-").concat(G)]:G,["".concat(L,"-gap-row-").concat(B)]:W,["".concat(L,"-gap-col-").concat(T)]:_},A,w,q),J=i()("".concat(L,"-item"),null!=(r=null==E?void 0:E.item)?r:x.item),Y=0,K=I.map((e,t)=>{var r;null!=e&&(Y=t);let n=(null==e?void 0:e.key)||"".concat(J,"-").concat(t);return a.createElement(y,{className:J,key:n,index:t,split:k,style:null!=(r=null==P?void 0:P.item)?r:v.item},e)}),Q=a.useMemo(()=>({latestIndex:Y}),[Y]);if(0===I.length)return null;let V={};return z&&(V.flexWrap="wrap"),!_&&D&&(V.columnGap=T),!W&&R&&(V.rowGap=B),U(a.createElement("div",Object.assign({ref:t,className:H,style:Object.assign(Object.assign(Object.assign({},V),f),N)},M),a.createElement(p,{value:Q},K)))});g.Compact=d.Ay;let f=g},85998:(e,t,r)=>{Promise.resolve().then(r.bind(r,93747))},92932:(e,t,r)=>{"use strict";var a=r(79484),n=r(12669);(0,a.L)(function(e,t){t._reactRoot||(t._reactRoot=(0,n.createRoot)(t));var r=t._reactRoot;return r.render(e),function(){return new Promise(function(e){setTimeout(function(){r.unmount(),e()},0)})}})},93747:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var a=r(95155);r(92932);var n=r(12115),i=r(19279),s=r(89543),c=r(39578),l=r(36060),o=r(92362),d=r(785),u=r(63646),p=r(2995),y=r(79),m=r(20063);let{backendFetch:h}=r(37783).Aq,{Text:g,Title:f}=i.A;function x(){let{message:e}=s.A.useApp(),t=(0,m.useSearchParams)().get("token"),[r,i]=(0,n.useState)(!0),[x,v]=(0,n.useState)(null),[j,b]=(0,n.useState)(!1),[A,w]=(0,n.useState)(null);(0,n.useEffect)(()=>{if(!t)return void i(!1);(async()=>{try{let e=await h("/api/promoter/getpendinginvite",{method:"POST",headers:{"Content-Type":"application/json"}}),t=await e.json();200===t.status&&t.data&&v(t.data)}catch(t){e.error("获取邀请信息失败")}finally{i(!1)}})()},[t,e]);let O=async r=>{b(!0);try{let a=await h("/api/promoter/respondtwoinvite",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,accept:r})}),n=await a.json();200===n.status?w(r?"success":"rejected"):e.error(n.errmessage||"操作失败")}catch(t){e.error("操作失败")}finally{b(!1)}};return r?(0,a.jsxs)(c.A,{style:{textAlign:"center",padding:40},children:[(0,a.jsx)(l.A,{size:"large"}),(0,a.jsx)("div",{style:{marginTop:16},children:(0,a.jsx)(g,{type:"secondary",children:"加载中..."})})]}):t?"success"===A?(0,a.jsx)(o.Ay,{status:"success",icon:(0,a.jsx)(p.A,{style:{color:"#52c41a"}}),title:"已成为二级宣发人员",subTitle:"您现在可以开始邀请用户并获得奖金了",extra:(0,a.jsx)(d.Ay,{type:"primary",href:"/admin/promoter",children:"进入宣发中心"})}):"rejected"===A?(0,a.jsx)(o.Ay,{status:"info",title:"已拒绝邀请",subTitle:"您已拒绝成为二级宣发人员",extra:(0,a.jsx)(d.Ay,{type:"primary",href:"/admin",children:"返回控制台"})}):x?(0,a.jsx)(c.A,{children:(0,a.jsxs)("div",{style:{textAlign:"center",padding:"20px 0"},children:[(0,a.jsx)(y.A,{style:{fontSize:48,color:"#1890ff",marginBottom:16}}),(0,a.jsx)(f,{level:4,children:"二级宣发邀请"}),(0,a.jsxs)(g,{type:"secondary",style:{display:"block",marginBottom:24},children:[(0,a.jsx)(g,{strong:!0,children:x.inviterNickname})," 邀请您成为其二级宣发人员"]}),(0,a.jsx)(c.A,{size:"small",style:{marginBottom:24,textAlign:"left",maxWidth:400,margin:"0 auto 24px"},children:(0,a.jsxs)(u.A,{direction:"vertical",style:{width:"100%"},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(g,{type:"secondary",children:"邀请人："}),(0,a.jsx)(g,{strong:!0,children:x.inviterNickname})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(g,{type:"secondary",children:"邀请时间："}),(0,a.jsx)(g,{children:new Date(x.createdAt).toLocaleString("zh-CN")})]})]})}),(0,a.jsx)(g,{type:"secondary",style:{display:"block",marginBottom:24},children:"成为二级宣发人员后，您可以邀请新用户注册并获得奖金分成"}),(0,a.jsxs)(u.A,{size:"middle",children:[(0,a.jsx)(d.Ay,{type:"primary",size:"large",loading:j,onClick:()=>O(!0),children:"接受邀请"}),(0,a.jsx)(d.Ay,{size:"large",loading:j,onClick:()=>O(!1),children:"拒绝"})]})]})}):(0,a.jsx)(o.Ay,{status:"warning",title:"邀请不存在或已过期",subTitle:"该邀请可能已被处理或不存在",extra:(0,a.jsx)(d.Ay,{type:"primary",href:"/admin",children:"返回控制台"})}):(0,a.jsx)(o.Ay,{status:"error",title:"无效的邀请链接",subTitle:"请检查链接是否正确"})}function v(){return(0,a.jsx)(n.Suspense,{fallback:(0,a.jsx)(c.A,{style:{textAlign:"center",padding:40},children:(0,a.jsx)(l.A,{size:"large"})}),children:(0,a.jsx)(x,{})})}}},e=>{e.O(0,[4041,6083,785,6240,9279,2245,9543,6060,5445,4540,9578,371,8441,1255,7358],()=>e(e.s=85998)),_N_E=e.O()}]);