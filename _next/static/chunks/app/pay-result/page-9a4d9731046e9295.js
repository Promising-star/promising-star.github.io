(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4099],{27243:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"}},35510:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(12115),a=r(50495),i=r(26240);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let c=n.forwardRef((e,t)=>n.createElement(i.A,s({},e,{ref:t,icon:a.A})))},37783:(e,t,r)=>{"use strict";r.d(t,{Aq:()=>a,Ay:()=>i});let n="http://gateway.rustplus.cn";class a{static formatDateTime(e){let t=new Date(e),r=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0");return"".concat(r,"-").concat(n,"-").concat(a," ").concat(i,":").concat(s)}static async copyToClipboard(e,t){let{onSuccess:r,onError:n}=t||{};try{if(navigator.clipboard&&window.isSecureContext)return await navigator.clipboard.writeText(e),null==r||r(),!0;let t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select();try{let e=document.execCommand("copy");if(document.body.removeChild(t),e)return null==r||r(),!0}catch(e){throw document.body.removeChild(t),e}return window.prompt("复制失败，请手动复制以下文本:",e),null==r||r(),!0}catch(e){return null==n||n(e instanceof Error?e:Error(String(e))),!1}}static toBoolean(e){return"string"==typeof e?"true"===(e=e.toLowerCase().trim())||"1"===e:!!e}static getGatewayUrl(e){return e.startsWith("/api/pay/")||e.startsWith("/api/notice/")?"".concat(n).concat(e):e.startsWith("/api/")?"".concat(n,"/api/backend").concat(e.slice(4)):"".concat(n).concat(e)}static async backendFetch(e,t){return fetch(a.getGatewayUrl(e),{credentials:"include",...t}).then(e=>403===e.status?(window.location.pathname.startsWith("/login")||(window.location.href="/login"),Promise.reject(Error("Unauthorized"))):e).catch(e=>{throw e})}static getCookie(e){var t,r;let n="; ".concat(document.cookie).split("; ".concat(e,"="));if(2===n.length)return null!=(r=null==(t=n.pop())?void 0:t.split(";").shift())?r:""}static detectDevice(){if("undefined"==typeof navigator)return{isMobile:!1,isWechat:!1,isIOS:!1,isAndroid:!1};let e=navigator.userAgent;return{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e),isWechat:/MicroMessenger/i.test(e),isIOS:/iPhone|iPad|iPod/i.test(e),isAndroid:/Android/i.test(e)}}}let i={domain:"rustplus.cn",payWebUrl:"https://pay.rustplus.cn"}},44074:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(12115),a=r(27243),i=r(26240);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let c=n.forwardRef((e,t)=>n.createElement(i.A,s({},e,{ref:t,icon:a.A})))},52192:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var n=r(95155),a=r(12115),i=r(20063),s=r(92362),c=r(785),o=r(35510),l=r(44074),d=r(37783),u=r(83487);function f(){let e=(0,i.useSearchParams)(),t=(0,i.useRouter)(),[r,f]=(0,a.useState)("loading"),[p,h]=(0,a.useState)(3),y=e.get("out_trade_no"),m=e.get("return_path")||"/";return((0,a.useEffect)(()=>{if(!y)return void f("error");(async()=>{try{let e=await d.Aq.backendFetch("/api/pay/a/queryalipayorderissuccess",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({out_trade_no:y})}),t=await e.json();200===t.status?f("success"):f("error")}catch(e){f("error")}})()},[y]),(0,a.useEffect)(()=>{if("success"!==r)return;if(p<=0)return void t.replace(m);let e=setTimeout(()=>h(e=>e-1),1e3);return()=>clearTimeout(e)},[r,p,t,m]),"loading"===r)?(0,n.jsx)(u.Ay,{text:"正在确认支付结果..."}):"error"===r?((0,u.Jy)(),(0,n.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"#1a1a1f"},children:(0,n.jsx)(s.Ay,{icon:(0,n.jsx)(o.A,{style:{color:"#ff4d4f"}}),title:(0,n.jsx)("span",{style:{color:"#fff"},children:"支付状态未知"}),subTitle:(0,n.jsx)("span",{style:{color:"rgba(255,255,255,0.5)"},children:"无法确认支付结果，请稍后查看账户余额"}),extra:(0,n.jsx)(c.Ay,{type:"primary",onClick:()=>t.replace(m),children:"返回"})})})):((0,u.Jy)(),(0,n.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"#1a1a1f"},children:(0,n.jsx)(s.Ay,{icon:(0,n.jsx)(l.A,{style:{color:"#52c41a"}}),title:(0,n.jsx)("span",{style:{color:"#fff"},children:"支付成功"}),subTitle:(0,n.jsxs)("span",{style:{color:"rgba(255,255,255,0.5)"},children:[p," 秒后自动返回..."]}),extra:(0,n.jsx)(c.Ay,{type:"primary",onClick:()=>t.replace(m),children:"立即返回"})})}))}function p(){return(0,n.jsx)(a.Suspense,{fallback:(0,n.jsx)(u.Ay,{}),children:(0,n.jsx)(f,{})})}},70209:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(88945),a=r(12115);let i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"};var s=r(86663);let c=a.forwardRef(function(e,t){return a.createElement(s.A,(0,n.A)({},e,{ref:t,icon:i}))})},71873:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(88945),a=r(12115),i=r(27243),s=r(86663);let c=a.forwardRef(function(e,t){return a.createElement(s.A,(0,n.A)({},e,{ref:t,icon:i.A}))})},83487:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>o,Jy:()=>s,bT:()=>c,ek:()=>i});var n=r(95155),a=r(12115);function i(){if("undefined"!=typeof document){let e=document.getElementById("app-loader");e&&e.classList.remove("hidden")}}function s(){if("undefined"!=typeof document){let e=document.getElementById("app-loader");e&&e.classList.add("hidden")}}function c(){if("undefined"!=typeof document){let e=document.getElementById("app-loader");return null!==e&&!e.classList.contains("hidden")}return!1}function o(e){let{text:t="加载中...",subText:r}=e;return a.useEffect(()=>{s()},[]),(0,n.jsxs)("div",{className:"fullscreen-loader",children:[(0,n.jsx)("div",{className:"fullscreen-loader-bg"}),(0,n.jsxs)("div",{className:"fullscreen-loader-content",children:[(0,n.jsxs)("div",{className:"fullscreen-loader-logo-container",children:[(0,n.jsx)("img",{className:"fullscreen-loader-logo",src:"https://www.rustplus.cn/logo.png",alt:"Logo"}),(0,n.jsx)("div",{className:"fullscreen-loader-spinner"})]}),(0,n.jsx)("div",{className:"fullscreen-loader-text",children:t}),r&&(0,n.jsx)("div",{className:"fullscreen-loader-subtext",children:r})]})]})}},91257:(e,t,r)=>{Promise.resolve().then(r.bind(r,52192))}},e=>{e.O(0,[4041,785,6240,371,8441,1255,7358],()=>e(e.s=91257)),_N_E=e.O()}]);